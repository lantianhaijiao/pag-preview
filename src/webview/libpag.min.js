!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).libpag={})}(this,(function(e){"use strict";let t;function r(e){const r=["length","name","prototype","wasmAsyncMethods"];let n=Object.getOwnPropertyNames(e).filter((e=>-1===r.indexOf(e)));e.wasmAsyncMethods&&e.wasmAsyncMethods.length>0&&(n=n.filter((t=>-1===e.wasmAsyncMethods.indexOf(t))));let a=Object.getOwnPropertyNames(e.prototype).filter((t=>"constructor"!==t&&"function"==typeof e.prototype[t]));e.prototype.wasmAsyncMethods&&e.prototype.wasmAsyncMethods.length>0&&(a=a.filter((t=>-1===e.prototype.wasmAsyncMethods.indexOf(t))));const i=(e,r)=>{const n=e[r];e[r]=function(...e){if(null!==t.Asyncify.currData){const r=t.Asyncify.currData;t.Asyncify.currData=null;const a=n.call(this,...e);return t.Asyncify.currData=r,a}return n.call(this,...e)}};n.forEach((t=>i(e,t))),a.forEach((t=>i(e.prototype,t)))}function n(e,t,r){e.wasmAsyncMethods||(e.wasmAsyncMethods=[]),e.wasmAsyncMethods.push(t)}function a(e){let t=Object.getOwnPropertyNames(e.prototype).filter((t=>"constructor"!==t&&"function"==typeof e.prototype[t]));const r=(t,r)=>{const n=t[r];t[r]=function(...t){if(!this.isDestroyed)return n.call(this,...t);console.error(`Don't call ${r} of the ${e.name} that is destroyed.`)}};t.forEach((t=>r(e.prototype,t)))}var i=(e=>(e[e.None=0]="None",e[e.Stretch=1]="Stretch",e[e.LetterBox=2]="LetterBox",e[e.Zoom=3]="Zoom",e))(i||{}),o=(e=>(e.onAnimationStart="onAnimationStart",e.onAnimationEnd="onAnimationEnd",e.onAnimationCancel="onAnimationCancel",e.onAnimationRepeat="onAnimationRepeat",e.onAnimationUpdate="onAnimationUpdate",e.onAnimationPlay="onAnimationPlay",e.onAnimationPause="onAnimationPause",e.onAnimationFlushed="onAnimationFlushed",e))(o||{}),s=(e=>(e[e.LeftJustify=0]="LeftJustify",e[e.CenterJustify=1]="CenterJustify",e[e.RightJustify=2]="RightJustify",e[e.FullJustifyLastLineLeft=3]="FullJustifyLastLineLeft",e[e.FullJustifyLastLineRight=4]="FullJustifyLastLineRight",e[e.FullJustifyLastLineCenter=5]="FullJustifyLastLineCenter",e[e.FullJustifyLastLineFull=6]="FullJustifyLastLineFull",e))(s||{}),l=(e=>(e[e.Default=0]="Default",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical",e))(l||{}),u=(e=>(e[e.Unknown=0]="Unknown",e[e.Null=1]="Null",e[e.Solid=2]="Solid",e[e.Text=3]="Text",e[e.Shape=4]="Shape",e[e.Image=5]="Image",e[e.PreCompose=6]="PreCompose",e))(u||{}),c=(e=>(e[e.None=0]="None",e[e.Scale=1]="Scale",e[e.Repeat=2]="Repeat",e[e.RepeatInverted=3]="RepeatInverted",e))(c||{}),f=(e=>(e[e.a=0]="a",e[e.c=1]="c",e[e.tx=2]="tx",e[e.b=3]="b",e[e.d=4]="d",e[e.ty=5]="ty",e[e.pers0=6]="pers0",e[e.pers1=7]="pers1",e[e.pers2=8]="pers2",e))(f||{}),d=(e=>(e[e.Success=0]="Success",e[e.TryAgainLater=-1]="TryAgainLater",e[e.Error=-2]="Error",e))(d||{}),h=(e=>(e[e.Unknown=0]="Unknown",e[e.ALPHA_8=1]="ALPHA_8",e[e.RGBA_8888=2]="RGBA_8888",e[e.BGRA_8888=3]="BGRA_8888",e))(h||{}),m=(e=>(e[e.Unknown=0]="Unknown",e[e.Opaque=1]="Opaque",e[e.Premultiplied=2]="Premultiplied",e[e.Unpremultiplied=3]="Unpremultiplied",e))(m||{}),p=Object.freeze({__proto__:null,PAGScaleMode:i,PAGViewListenerEvent:o,ParagraphJustification:s,TextDirection:l,LayerType:u,PAGTimeStretchMode:c,MatrixIndex:f,DecoderResult:d,ColorType:h,AlphaType:m}),y=Object.defineProperty,v=Object.getOwnPropertyDescriptor;let w=class{constructor(e){this.isDestroyed=!1,this.wasmIns=e}static makeAll(e,r,n,a,i,o,s=0,l=0,u=1){const c=t._Matrix._MakeAll(e,r,n,a,i,o,s,l,u);if(!c)throw new Error("Matrix.makeAll fail, please check parameters valid!");return new w(c)}static makeScale(e,r){let n;if(n=void 0!==r?t._Matrix._MakeScale(e,r):t._Matrix._MakeScale(e),!n)throw new Error("Matrix.makeScale fail, please check parameters valid!");return new w(n)}static makeTrans(e,r){const n=t._Matrix._MakeTrans(e,r);if(!n)throw new Error("Matrix.makeTrans fail, please check parameters valid!");return new w(n)}get a(){return this.wasmIns?this.wasmIns._get(f.a):0}set a(e){var t;null==(t=this.wasmIns)||t._set(f.a,e)}get b(){return this.wasmIns?this.wasmIns._get(f.b):0}set b(e){var t;null==(t=this.wasmIns)||t._set(f.b,e)}get c(){return this.wasmIns?this.wasmIns._get(f.c):0}set c(e){var t;null==(t=this.wasmIns)||t._set(f.c,e)}get d(){return this.wasmIns?this.wasmIns._get(f.d):0}set d(e){var t;null==(t=this.wasmIns)||t._set(f.d,e)}get tx(){return this.wasmIns?this.wasmIns._get(f.tx):0}set tx(e){var t;null==(t=this.wasmIns)||t._set(f.tx,e)}get ty(){return this.wasmIns?this.wasmIns._get(f.ty):0}set ty(e){var t;null==(t=this.wasmIns)||t._set(f.ty,e)}get(e){return this.wasmIns?this.wasmIns._get(e):0}set(e,t){var r;null==(r=this.wasmIns)||r._set(e,t)}setAll(e,t,r,n,a,i,o=0,s=0,l=1){var u;null==(u=this.wasmIns)||u._setAll(e,t,r,n,a,i,o,s,l)}setAffine(e,t,r,n,a,i){var o;null==(o=this.wasmIns)||o._setAffine(e,t,r,n,a,i)}reset(){var e;null==(e=this.wasmIns)||e._reset()}setTranslate(e,t){var r;null==(r=this.wasmIns)||r._setTranslate(e,t)}setScale(e,t,r=0,n=0){var a;null==(a=this.wasmIns)||a._setScale(e,t,r,n)}setRotate(e,t=0,r=0){var n;null==(n=this.wasmIns)||n._setRotate(e,t,r)}setSinCos(e,t,r=0,n=0){var a;null==(a=this.wasmIns)||a._setSinCos(e,t,r,n)}setSkew(e,t,r=0,n=0){var a;null==(a=this.wasmIns)||a._setSkew(e,t,r,n)}setConcat(e,t){var r;null==(r=this.wasmIns)||r._setConcat(e.wasmIns,t.wasmIns)}preTranslate(e,t){var r;null==(r=this.wasmIns)||r._preTranslate(e,t)}preScale(e,t,r=0,n=0){var a;null==(a=this.wasmIns)||a._preScale(e,t,r,n)}preRotate(e,t=0,r=0){var n;null==(n=this.wasmIns)||n._preRotate(e,t,r)}preSkew(e,t,r=0,n=0){var a;null==(a=this.wasmIns)||a._preSkew(e,t,r,n)}preConcat(e){var t;null==(t=this.wasmIns)||t._preConcat(e.wasmIns)}postTranslate(e,t){var r;null==(r=this.wasmIns)||r._postTranslate(e,t)}postScale(e,t,r=0,n=0){var a;null==(a=this.wasmIns)||a._postScale(e,t,r,n)}postRotate(e,t=0,r=0){var n;null==(n=this.wasmIns)||n._postRotate(e,t,r)}postSkew(e,t,r=0,n=0){var a;null==(a=this.wasmIns)||a._postSkew(e,t,r,n)}postConcat(e){var t;null==(t=this.wasmIns)||t._postConcat(e.wasmIns)}destroy(){this.wasmIns.delete()}};w=((e,t,r,n)=>{for(var a,i=n>1?void 0:n?v(t,r):t,o=e.length-1;o>=0;o--)(a=e[o])&&(i=(n?a(t,r,i):a(i))||i);return n&&i&&y(t,r,i),i})([a,r],w);const g=(e,r,...n)=>{if(null!==t.Asyncify.currData){const a=t.Asyncify.currData;t.Asyncify.currData=null;const i=e.call(r,...n);return t.Asyncify.currData=a,i}return e.call(r,...n)},_=(e,t)=>new Proxy(e,{get(e,r,n){switch(r){case"get":return r=>{const n=g(e.get,e,r);return n?t(n):n};case"push_back":return t=>{g(e.push_back,e,t.wasmIns||t)};case"size":return()=>g(e.size,e);default:return Reflect.get(e,r,n)}}}),b=e=>{switch(g(e._layerType,e)){case u.Solid:return new t.PAGSolidLayer(e);case u.Text:return new t.PAGTextLayer(e);case u.Image:return new t.PAGImageLayer(e);default:return new t.PAGLayer(e)}},E=e=>(null==e?void 0:e.wasmIns)?e.wasmIns:e;var C=Object.defineProperty,x=Object.getOwnPropertyDescriptor;let P=class{constructor(e){this.wasmIns=e}uniqueID(){return this.wasmIns._uniqueID()}layerType(){return this.wasmIns._layerType()}layerName(){return this.wasmIns._layerName()}matrix(){const e=this.wasmIns._matrix();if(!e)throw new Error("Get matrix fail!");return new w(e)}setMatrix(e){this.wasmIns._setMatrix(e.wasmIns)}resetMatrix(){this.wasmIns._resetMatrix()}getTotalMatrix(){if(!this.wasmIns._getTotalMatrix())throw new Error("Get total matrix fail!");return new w(this.wasmIns._getTotalMatrix())}alpha(){return this.wasmIns._alpha()}setAlpha(e){this.wasmIns._setAlpha(e)}visible(){return this.wasmIns._visible()}setVisible(e){this.wasmIns._setVisible(e)}editableIndex(){return this.wasmIns._editableIndex()}parent(){const e=this.wasmIns._parent();if(!e)throw new Error("Get total matrix fail!");return new A(e)}markers(){const e=this.wasmIns._markers();if(!e)throw new Error("Get markers fail!");return _(e,(e=>e))}localTimeToGlobal(e){return this.wasmIns._localTimeToGlobal(e)}globalToLocalTime(e){return this.wasmIns._globalToLocalTime(e)}duration(){return this.wasmIns._duration()}frameRate(){return this.wasmIns._frameRate()}startTime(){return this.wasmIns._startTime()}setStartTime(e){this.wasmIns._setStartTime(e)}currentTime(){return this.wasmIns._currentTime()}setCurrentTime(e){this.wasmIns._setCurrentTime(e)}getProgress(){return this.wasmIns._getProgress()}setProgress(e){this.wasmIns._setProgress(e)}preFrame(){this.wasmIns._preFrame()}nextFrame(){this.wasmIns._nextFrame()}getBounds(){return this.wasmIns._getBounds()}trackMatteLayer(){const e=this.wasmIns._trackMatteLayer();if(!e)throw new Error("Get track matte layer fail!");return b(e)}excludedFromTimeline(){return this.wasmIns._excludedFromTimeline()}setExcludedFromTimeline(e){this.wasmIns._setExcludedFromTimeline(e)}isPAGFile(){return this.wasmIns._isPAGFile()}asTypeLayer(){return b(this)}isDelete(){return this.wasmIns.isDelete()}destroy(){this.wasmIns.delete(),this.isDestroyed=!0}};P=((e,t,r,n)=>{for(var a,i=n>1?void 0:n?x(t,r):t,o=e.length-1;o>=0;o--)(a=e[o])&&(i=(n?a(t,r,i):a(i))||i);return n&&i&&C(t,r,i),i})([a,r],P);var T=Object.defineProperty,k=Object.getOwnPropertyDescriptor;let A=class extends P{static make(e,r){const n=t._PAGComposition._Make(e,r);if(!n)throw new Error("Make PAGComposition fail!");return new A(n)}width(){return this.wasmIns._width()}height(){return this.wasmIns._height()}setContentSize(e,t){this.wasmIns._setContentSize(e,t)}numChildren(){return this.wasmIns._numChildren()}getLayerAt(e){const t=this.wasmIns._getLayerAt(e);if(!t)throw new Error(`Get layer at ${e} fail!`);return b(t)}getLayerIndex(e){return this.wasmIns._getLayerIndex(e.wasmIns)}setLayerIndex(e,t){return this.wasmIns._setLayerIndex(e.wasmIns,t)}addLayer(e){return this.wasmIns._addLayer(e.wasmIns)}addLayerAt(e,t){return this.wasmIns._addLayerAt(e.wasmIns,t)}contains(e){return this.wasmIns._contains(e.wasmIns)}removeLayer(e){const t=this.wasmIns._removeLayer(e.wasmIns);if(!t)throw new Error("Remove layer fail!");return b(t)}removeLayerAt(e){const t=this.wasmIns._removeLayerAt(e);if(!t)throw new Error(`Remove layer at ${e} fail!`);return b(t)}removeAllLayers(){this.wasmIns._removeAllLayers()}swapLayer(e,t){this.wasmIns._swapLayer(e.wasmIns,t.wasmIns)}swapLayerAt(e,t){this.wasmIns._swapLayerAt(e,t)}audioBytes(){return this.wasmIns._audioBytes()}audioMarkers(){const e=this.wasmIns._audioMarkers();if(!e)throw new Error("Get audioMarkers fail!");return _(e,(e=>e))}audioStartTime(){return this.wasmIns._audioStartTime()}getLayersByName(e){const t=this.wasmIns._getLayersByName(e);if(!t)throw new Error(`Get layers by ${e} fail!`);return _(t,b)}getLayersUnderPoint(e,t){const r=this.wasmIns._getLayersUnderPoint(e,t);if(!r)throw new Error(`Get layers under point ${e},${t} fail!`);return _(r,b)}};A=((e,t,r,n)=>{for(var a,i=n>1?void 0:n?k(t,r):t,o=e.length-1;o>=0;o--)(a=e[o])&&(i=(n?a(t,r,i):a(i))||i);return n&&i&&T(t,r,i),i})([a,r],A);const I=e=>new Promise((t=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=()=>{console.error(r.error.message)},r.readAsArrayBuffer(e)}));var S=Object.defineProperty,D=Object.getOwnPropertyDescriptor,L=(e,t,r,n)=>{for(var a,i=n>1?void 0:n?D(t,r):t,o=e.length-1;o>=0;o--)(a=e[o])&&(i=(n?a(t,r,i):a(i))||i);return n&&i&&S(t,r,i),i};let F=class extends A{static async load(e){let t=null;if(e instanceof File?t=await I(e):e instanceof Blob?t=await I(new File([e],"")):e instanceof ArrayBuffer&&(t=e),!t)throw new Error("Initialize PAGFile data type error, please put check data type must to be File ｜ Blob | ArrayBuffer!");return F.loadFromBuffer(t)}static loadFromBuffer(e){if(!(e&&e.byteLength>0))throw new Error("Initialize PAGFile data not be empty!");const r=new Uint8Array(e),n=r.byteLength,a=t._malloc(n),i=new Uint8Array(t.HEAPU8.buffer,a,n);i.set(r);const o=t._PAGFile._Load(i.byteOffset,i.length);if(!o)throw new Error("Load PAGFile fail!");const s=new F(o);return t._free(a),s}static maxSupportedTagLevel(){return t._PAGFile._MaxSupportedTagLevel()}tagLevel(){return this.wasmIns._tagLevel()}numTexts(){return this.wasmIns._numTexts()}numImages(){return this.wasmIns._numImages()}numVideos(){return this.wasmIns._numVideos()}getTextData(e){return this.wasmIns._getTextData(e)}replaceText(e,t){this.wasmIns._replaceText(e,t)}replaceImage(e,t){this.wasmIns._replaceImage(e,t.wasmIns)}getLayersByEditableIndex(e,t){const r=this.wasmIns._getLayersByEditableIndex(e,t);if(!r)throw new Error(`Get ${(e=>{switch(e){case u.Solid:return"Solid";case u.Text:return"Text";case u.Shape:return"Shape";case u.Image:return"Image";case u.PreCompose:return"PreCompose";default:return"Unknown"}})(t)} layers by ${e} fail!`);return _(r,b)}getEditableIndices(e){return this.wasmIns._getEditableIndices(e)}timeStretchMode(){return this.wasmIns._timeStretchMode()}setTimeStretchMode(e){this.wasmIns._setTimeStretchMode(e)}setDuration(e){this.wasmIns._setDuration(e)}copyOriginal(){const e=this.wasmIns._copyOriginal();if(!e)throw new Error("Copy original fail!");return new F(e)}};L([n],F,"load",1),F=L([a,r],F);var M=Object.defineProperty,R=Object.getOwnPropertyDescriptor;let B=class{constructor(e){this.isDestroyed=!1,this.wasmIns=e}static fromCanvas(e){const r=t._PAGSurface._FromCanvas(e);if(!r)throw new Error(`Make PAGSurface from canvas ${e} fail!`);return new B(r)}static fromTexture(e,r,n,a){const i=t._PAGSurface._FromTexture(e,r,n,a);if(!i)throw new Error(`Make PAGSurface from texture ${e} fail!`);return new B(i)}static fromRenderTarget(e,r,n,a){const i=t._PAGSurface._FromRenderTarget(e,r,n,a);if(!i)throw new Error(`Make PAGSurface from frameBuffer ${e} fail!`);return new B(i)}width(){return this.wasmIns._width()}height(){return this.wasmIns._height()}updateSize(){this.wasmIns._updateSize()}clearAll(){return this.wasmIns._clearAll()}freeCache(){this.wasmIns._freeCache()}readPixels(e,r){if(e===h.Unknown)return null;const n=this.width()*(e===h.ALPHA_8?1:4),a=n*this.height(),i=new Uint8Array(a),o=t._malloc(i.byteLength),s=new Uint8Array(t.HEAPU8.buffer,o,i.byteLength),l=this.wasmIns._readPixels(e,r,o,n);return i.set(s),t._free(o),l?i:null}destroy(){this.wasmIns.delete(),this.isDestroyed=!0}};B=((e,t,r,n)=>{for(var a,i=n>1?void 0:n?R(t,r):t,o=e.length-1;o>=0;o--)(a=e[o])&&(i=(n?a(t,r,i):a(i))||i);return n&&i&&M(t,r,i),i})([a,r],B);var j=Object.defineProperty,O=Object.getOwnPropertyDescriptor,G=(e,t,r,n)=>{for(var a,i=n>1?void 0:n?O(t,r):t,o=e.length-1;o>=0;o--)(a=e[o])&&(i=(n?a(t,r,i):a(i))||i);return n&&i&&j(t,r,i),i};let N=class{constructor(e){this.isDestroyed=!1,this.videoReaders=[],this.wasmIns=e}static create(){const e=new t._PAGPlayer;if(!e)throw new Error("Create PAGPlayer fail!");return new N(e)}setProgress(e){this.wasmIns._setProgress(e)}async flush(){return t.webAssemblyQueue.exec(this.wasmIns._flush,this.wasmIns)}async flushInternal(e){const r=await t.webAssemblyQueue.exec((async()=>{t.currentPlayer=this;const r=await this.wasmIns._flush();return t.currentPlayer=null,e(r),r}),this.wasmIns);for(const e of this.videoReaders){const t=e.getError();if(null!==t)throw t}return r}duration(){return this.wasmIns._duration()}getProgress(){return this.wasmIns._getProgress()}videoEnabled(){return this.wasmIns._videoEnabled()}setVideoEnabled(e){this.wasmIns._setVideoEnabled(e)}cacheEnabled(){return this.wasmIns._cacheEnabled()}setCacheEnabled(e){this.wasmIns._setCacheEnabled(e)}cacheScale(){return this.wasmIns._cacheScale()}setCacheScale(e){this.wasmIns._setCacheScale(e)}maxFrameRate(){return this.wasmIns._maxFrameRate()}setMaxFrameRate(e){this.wasmIns._setMaxFrameRate(e)}scaleMode(){return this.wasmIns._scaleMode()}setScaleMode(e){this.wasmIns._setScaleMode(e)}setSurface(e){this.wasmIns._setSurface(E(e))}getComposition(){const e=this.wasmIns._getComposition();if(!e)throw new Error("Get composition fail!");return e._isPAGFile()?new F(e):new A(e)}setComposition(e){this.wasmIns._setComposition(E(e))}getSurface(){const e=this.wasmIns._getSurface();if(!e)throw new Error("Get surface fail!");return new B(e)}matrix(){const e=this.wasmIns._matrix();if(!e)throw new Error("Get matrix fail!");return new w(e)}setMatrix(e){this.wasmIns._setMatrix(e.wasmIns)}nextFrame(){this.wasmIns._nextFrame()}preFrame(){this.wasmIns._preFrame()}autoClear(){return this.wasmIns._autoClear()}setAutoClear(e){this.wasmIns._setAutoClear(e)}getBounds(e){return this.wasmIns._getBounds(e.wasmIns)}getLayersUnderPoint(e,t){const r=this.wasmIns._getLayersUnderPoint(e,t);if(!r)throw new Error(`Get layers under point, x: ${e} y:${t} fail!`);return _(r,b)}hitTestPoint(e,t,r,n=!1){return this.wasmIns._hitTestPoint(e.wasmIns,t,r,n)}renderingTime(){return this.wasmIns._renderingTime()}imageDecodingTime(){return this.wasmIns._imageDecodingTime()}presentingTime(){return this.wasmIns._presentingTime()}graphicsMemory(){return this.wasmIns._graphicsMemory()}prepare(){return t.webAssemblyQueue.exec((async()=>{t.currentPlayer=this,await this.wasmIns._prepare(),t.currentPlayer=null}),this.wasmIns)}destroy(){this.wasmIns.delete(),this.isDestroyed=!0}linkVideoReader(e){this.videoReaders.push(e)}unlinkVideoReader(e){const t=this.videoReaders.indexOf(e);-1!==t&&this.videoReaders.splice(t,1)}};G([n],N.prototype,"flush",1),G([n],N.prototype,"flushInternal",1),N=G([a,r],N);const $=2560,U={depth:!1,stencil:!1,antialias:!1},H=new Array,V=e=>window.OffscreenCanvas&&e instanceof window.OffscreenCanvas,W=()=>H.pop()||q(),z=e=>{H.length<10&&H.push(e)},q=()=>{try{const e=new OffscreenCanvas(0,0);return"function"==typeof e.getContext("2d").measureText?e:document.createElement("canvas")}catch(e){return document.createElement("canvas")}};class X{static async createFromBytes(e){const t=new Blob([e],{type:"image/*"});return new Promise((e=>{const r=new Image;r.onload=function(){e(new X(r))},r.onerror=function(){console.error("image create from bytes error."),e(null)},r.src=URL.createObjectURL(t)}))}static async createFromPath(e){return new Promise((t=>{const r=new Image;r.onload=function(){t(new X(r))},r.onerror=function(){console.error(`image create from path error: ${e}`),t(null)},r.src=e}))}constructor(e,t=!1){this.source=e,this.reuse=t}width(){return window.HTMLVideoElement&&this.source instanceof HTMLVideoElement?this.source.videoWidth:this.source.width}height(){return window.HTMLVideoElement&&this.source instanceof HTMLVideoElement?this.source.videoHeight:this.source.height}upload(e){var t;const r=null==(t=e.currentContext)?void 0:t.GLctx;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.pixelStorei(r.UNPACK_ALIGNMENT,4),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.source),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1)}onDestroy(){this.reuse&&z(this.source)}}var J=Object.defineProperty,K=Object.getOwnPropertyDescriptor,Q=(e,t,r,n)=>{for(var a,i=n>1?void 0:n?K(t,r):t,o=e.length-1;o>=0;o--)(a=e[o])&&(i=(n?a(t,r,i):a(i))||i);return n&&i&&J(t,r,i),i};let Y=class{constructor(e){this.isDestroyed=!1,this.wasmIns=e}static async fromFile(e){return new Promise(((t,r)=>{const n=new Image;n.onload=async()=>{t(Y.fromSource(n))},n.onerror=e=>{r(e)},n.src=URL.createObjectURL(e)}))}static fromSource(e){const r=new X(e),n=t._PAGImage._FromNativeImage(r);if(!n)throw new Error("Make PAGImage from source fail!");return new Y(n)}static fromPixels(e,r,n,a,i){const o=r*(a===h.ALPHA_8?1:4),s=t._malloc(e.byteLength);new Uint8Array(t.HEAPU8.buffer,s,e.byteLength).set(e);const l=t._PAGImage._FromPixels(s,r,n,o,a,i);if(!l)throw new Error("Make PAGImage from pixels fail!");return new Y(l)}static fromTexture(e,r,n,a){const i=t._PAGImage._FromTexture(e,r,n,a);if(!i)throw new Error("Make PAGImage from texture fail!");return new Y(i)}width(){return this.wasmIns._width()}height(){return this.wasmIns._height()}scaleMode(){return this.wasmIns._scaleMode()}setScaleMode(e){this.wasmIns._setScaleMode(e)}matrix(){const e=this.wasmIns._matrix();if(!e)throw new Error("Get matrix fail!");return new w(e)}setMatrix(e){this.wasmIns._setMatrix(e.wasmIns)}destroy(){this.wasmIns.delete(),this.isDestroyed=!0}};Q([n],Y,"fromFile",1),Y=Q([a,r],Y);class Z{constructor(){this.listenerMap=new Map}on(e,t){let r=[];this.listenerMap.has(e)&&(r=this.listenerMap.get(e)),r.push(t),this.listenerMap.set(e,r)}off(e,t){if(!this.listenerMap.has(e))return!1;const r=this.listenerMap.get(e);if(0===r.length)return!1;if(!t)return this.listenerMap.delete(e),!0;const n=r.indexOf(t);return-1!==n&&(r.splice(n,1),!0)}emit(e,t){if(!this.listenerMap.has(e))return!1;const r=this.listenerMap.get(e);return 0!==r.length&&(r.forEach((e=>e(t))),!0)}}var ee=Object.defineProperty,te=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,ae=(e,t,r)=>t in e?ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class ie{constructor(e,t=!1){this.isDestroyed=!1,this.oldHandle=0,this.handle=e,this.adopted=t}static from(e){if(e instanceof ie)return new ie(e.handle,!0);{const r=window.WebGL2RenderingContext&&e instanceof window.WebGL2RenderingContext?2:1,{GL:n}=t;let a=0;return n.contexts.length>0&&(a=n.contexts.findIndex((t=>(null==t?void 0:t.GLctx)===e))),a<1?(a=n.registerContext(e,((e,t)=>{for(var r in t||(t={}))re.call(t,r)&&ae(e,r,t[r]);if(te)for(var r of te(t))ne.call(t,r)&&ae(e,r,t[r]);return e})({majorVersion:r,minorVersion:0},U)),new ie(a)):new ie(a,!0)}}getContext(){return t.GL.getContext(this.handle).GLctx}makeCurrent(){var e;return!this.isDestroyed&&(this.oldHandle=(null==(e=t.GL.currentContext)?void 0:e.handle)||0,this.oldHandle===this.handle||t.GL.makeContextCurrent(this.handle))}clearCurrent(){this.isDestroyed||this.oldHandle!==this.handle&&(t.GL.makeContextCurrent(0),this.oldHandle&&t.GL.makeContextCurrent(this.oldHandle))}registerTexture(e){return this.register(t.GL.textures,e)}getTexture(e){return t.GL.textures[e]}unregisterTexture(e){t.GL.textures[e]=null}registerRenderTarget(e){return this.register(t.GL.framebuffers,e)}getRenderTarget(e){return t.GL.framebuffers[e]}unregisterRenderTarget(e){t.GL.framebuffers[e]=null}destroy(){this.adopted||t.GL.deleteContext(this.handle)}register(e,r){const n=t.GL.getNewId(e);return e[n]=r,n}}var oe=Object.defineProperty,se=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,ce=(e,t,r)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fe=(e,t)=>{for(var r in t||(t={}))le.call(t,r)&&ce(e,r,t[r]);if(se)for(var r of se(t))ue.call(t,r)&&ce(e,r,t[r]);return e};const de=[];class he{constructor(e,t){this._canvas=null,this._glContext=null,this.retainCount=0,this._canvas=e;const r=e.getContext("webgl",fe(fe({},U),t));if(!r)throw new Error("Canvas context is not WebGL!");this._glContext=ie.from(r)}static from(e,t){let r=de.find((t=>t.canvas===e));return r||(r=new he(e,t),de.push(r),r)}retain(){this.retainCount+=1}release(){if(this.retainCount-=1,0===this.retainCount){if(!this._glContext)return;this._glContext.destroy(),this._glContext=null,this._canvas=null}}get canvas(){return this._canvas}get glContext(){return this._glContext}}let me;try{me=performance.now.bind(performance)}catch(e){me=Date.now.bind(Date)}class pe{constructor(){this.startTime=me(),this.markers={}}reset(){this.startTime=me(),this.markers={}}mark(e){e?Object.keys(this.markers).find((t=>t===e))?console.log(`Clock.mark(): The specified marker name '${e}' already exists!`):this.markers[e]=me():console.log("Clock.mark(): An empty marker name was specified!")}measure(e,t){let r,n;if(e){if(!Object.keys(this.markers).find((t=>t===e)))return console.log(`Clock.measure(): The specified makerFrom '${e}' does not exist!`),0;r=this.markers[e]}else r=this.startTime;if(t){if(!Object.keys(this.markers).find((e=>e===t)))return console.log(`Clock.measure(): The specified makerTo '${t}' does not exist!`),0;n=this.markers[t]}else n=me();return n-r}}var ye=Object.defineProperty,ve=Object.getOwnPropertyDescriptor,we=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable,be=(e,t,r)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ee=(e,t)=>{for(var r in t||(t={}))ge.call(t,r)&&be(e,r,t[r]);if(we)for(var r of we(t))_e.call(t,r)&&be(e,r,t[r]);return e};let Ce=class{constructor(e,t){this.repeatCount=0,this.isPlaying=!1,this.isDestroyed=!1,this.pagViewOptions={useScale:!0,useCanvas2D:!1,firstFrame:!0},this.renderCanvas=null,this.pagGlContext=null,this.frameRate=0,this.pagSurface=null,this.currentFrame=-1,this.timer=null,this.flushingNextFrame=!1,this.playTime=0,this.startTime=0,this.repeatedTimes=0,this.eventManager=new Z,this.rawWidth=0,this.rawHeight=0,this.debugData={FPS:0,flushTime:0},this.fpsBuffer=[],this.player=e,this.canvasElement=t}static async init(e,r,n={}){let a=null;if("string"==typeof r?a=document.getElementById(r.substr(1)):(r instanceof HTMLCanvasElement||V(r))&&(a=r),!a)throw new Error("Canvas is not found!");const i=t.PAGPlayer.create(),o=new Ce(i,a);return o.pagViewOptions=Ee(Ee({},o.pagViewOptions),n),o.pagViewOptions.useCanvas2D?(t.globalCanvas.retain(),o.pagGlContext=ie.from(t.globalCanvas.glContext)):(o.renderCanvas=he.from(a),o.renderCanvas.retain(),o.pagGlContext=ie.from(o.renderCanvas.glContext)),o.resetSize(o.pagViewOptions.useScale),o.frameRate=e.frameRate(),o.pagSurface=this.makePAGSurface(o.pagGlContext,o.rawWidth,o.rawHeight),o.player.setSurface(o.pagSurface),o.player.setComposition(e),o.setProgress(0),o.pagViewOptions.firstFrame?(await o.flush(),o.currentFrame=0):await o.prepare(),o}static makePAGSurface(e,t,r){if(!e.makeCurrent())throw new Error("Make context current fail!");const n=B.fromRenderTarget(0,t,r,!0);return e.clearCurrent(),n}duration(){return this.player.duration()}addListener(e,t){return this.eventManager.on(e,t)}removeListener(e,t){return this.eventManager.off(e,t)}async play(){if(this.isPlaying)return;this.isPlaying=!0,this.startTime=1e3*this.getNowTime()-this.playTime;for(const e of this.player.videoReaders)e.isPlaying=!0;const e=this.playTime;await this.flushLoop(!0),0===e&&this.eventManager.emit("onAnimationStart",this),this.eventManager.emit("onAnimationPlay",this),0===this.currentFrame&&this.eventManager.emit("onAnimationUpdate",this)}pause(){if(this.isPlaying){this.clearTimer();for(const e of this.player.videoReaders)e.pause();this.isPlaying=!1,this.eventManager.emit("onAnimationPause",this)}}async stop(e=!0){this.clearTimer(),this.playTime=0,this.player.setProgress(0),this.currentFrame=0,await this.flush();for(const e of this.player.videoReaders)e.stop();this.isPlaying=!1,e&&this.eventManager.emit("onAnimationCancel",this)}setRepeatCount(e){this.repeatCount=e<0?0:e-1}getProgress(){return this.player.getProgress()}setProgress(e){return this.playTime=e*this.duration(),this.startTime=1e3*this.getNowTime()-this.playTime,this.isPlaying||this.player.setProgress(e),e}videoEnabled(){return this.player.videoEnabled()}setVideoEnabled(e){this.player.setVideoEnabled(e)}cacheEnabled(){return this.player.cacheEnabled()}setCacheEnabled(e){this.player.setCacheEnabled(e)}cacheScale(){return this.player.cacheScale()}setCacheScale(e){this.player.setCacheScale(e)}maxFrameRate(){return this.player.maxFrameRate()}setMaxFrameRate(e){this.player.setMaxFrameRate(e)}scaleMode(){return this.player.scaleMode()}setScaleMode(e){this.player.setScaleMode(e)}async flush(){const e=new pe,r=await this.player.flushInternal((r=>{var n,a;if(this.pagViewOptions.useCanvas2D&&r&&t.globalCanvas.canvas){this.canvasContext||(this.canvasContext=null==(n=this.canvasElement)?void 0:n.getContext("2d"));const e=this.canvasContext.globalCompositeOperation;this.canvasContext.globalCompositeOperation="copy",null==(a=this.canvasContext)||a.drawImage(t.globalCanvas.canvas,0,t.globalCanvas.canvas.height-this.rawHeight,this.rawWidth,this.rawHeight,0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.canvasContext.globalCompositeOperation=e}e.mark("flush"),this.setDebugData({flushTime:e.measure("","flush")}),this.updateFPS()}));return this.eventManager.emit("onAnimationUpdate",this),r&&this.eventManager.emit("onAnimationFlushed",this),r}freeCache(){var e;null==(e=this.pagSurface)||e.freeCache()}getComposition(){return this.player.getComposition()}setComposition(e){this.player.setComposition(e)}matrix(){return this.player.matrix()}setMatrix(e){this.player.setMatrix(e)}getLayersUnderPoint(e,t){return this.player.getLayersUnderPoint(e,t)}updateSize(){var e;if(!this.canvasElement)throw new Error("Canvas element is not found!");if(this.rawWidth=this.canvasElement.width,this.rawHeight=this.canvasElement.height,!this.pagGlContext)return;const t=Ce.makePAGSurface(this.pagGlContext,this.rawWidth,this.rawHeight);this.player.setSurface(t),null==(e=this.pagSurface)||e.destroy(),this.pagSurface=t}prepare(){return this.player.prepare()}makeSnapshot(){return createImageBitmap(this.canvasElement)}destroy(){var e,r,n;this.clearTimer(),this.player.destroy(),null==(e=this.pagSurface)||e.destroy(),this.pagViewOptions.useCanvas2D?t.globalCanvas.release():null==(r=this.renderCanvas)||r.release(),null==(n=this.pagGlContext)||n.destroy(),this.pagGlContext=null,this.canvasContext=null,this.canvasElement=null,this.isDestroyed=!0}getDebugData(){return this.debugData}setDebugData(e){this.debugData=Ee(Ee({},this.debugData),e)}async flushLoop(e=!1){if(this.isPlaying&&(this.timer=window.requestAnimationFrame((async()=>{await this.flushLoop()})),!this.flushingNextFrame))try{this.flushingNextFrame=!0,await this.flushNextFrame(e),this.flushingNextFrame=!1}catch(e){throw this.flushingNextFrame=!1,"The play() request was interrupted because the document was hidden!"!==e.message&&this.clearTimer(),e}}async flushNextFrame(e=!1){const t=this.duration();this.playTime=1e3*this.getNowTime()-this.startTime;const r=Math.floor(this.playTime/1e6*this.frameRate),n=Math.floor(this.playTime/t);if(!e&&this.repeatCount>=0&&n>this.repeatCount)return this.clearTimer(),this.player.setProgress(1),await this.flush(),this.playTime=0,this.isPlaying=!1,this.repeatedTimes=0,this.eventManager.emit("onAnimationEnd",this),!0;if(!e&&this.repeatedTimes===n&&this.currentFrame===r)return!1;this.repeatedTimes<n&&this.eventManager.emit("onAnimationRepeat",this),this.player.setProgress(this.playTime%t/t);const a=await this.flush();return this.needResetStartTime()&&(this.startTime=1e3*this.getNowTime()-this.playTime),this.currentFrame=r,this.repeatedTimes=n,a}getNowTime(){try{return performance.now()}catch(e){return Date.now()}}clearTimer(){this.timer&&(window.cancelAnimationFrame(this.timer),this.timer=null)}resetSize(e=!0){if(!this.canvasElement)throw new Error("Canvas element is not found!");if(!e||V(this.canvasElement))return this.rawWidth=this.canvasElement.width,void(this.rawHeight=this.canvasElement.height);let t;const r=this.canvasElement,n=window.getComputedStyle(r,null),a={width:Number(n.width.replace("px","")),height:Number(n.height.replace("px",""))};if(a.width>0&&a.height>0)t=a;else{const e={width:Number(r.style.width.replace("px","")),height:Number(r.style.height.replace("px",""))};t=e.width>0&&e.height>0?e:{width:r.width,height:r.height}}r.style.width=`${t.width}px`,r.style.height=`${t.height}px`,this.rawWidth=t.width*window.devicePixelRatio,this.rawHeight=t.height*window.devicePixelRatio,r.width=this.rawWidth,r.height=this.rawHeight}updateFPS(){let e;try{e=performance.now()}catch(t){e=Date.now()}this.fpsBuffer=this.fpsBuffer.filter((t=>e-t<=1e3)),this.fpsBuffer.push(e),this.setDebugData({FPS:this.fpsBuffer.length})}needResetStartTime(){for(const e of this.player.videoReaders)if(e.isSought)return!0;return!1}};Ce=((e,t,r,n)=>{for(var a,i=n>1?void 0:n?ve(t,r):t,o=e.length-1;o>=0;o--)(a=e[o])&&(i=(n?a(t,r,i):a(i))||i);return n&&i&&ye(t,r,i),i})([a],Ce);const xe=["emoji"].concat(...["Arial",'"Courier New"',"Georgia",'"Times New Roman"','"Trebuchet MS"',"Verdana"]);var Pe=Object.defineProperty,Te=Object.getOwnPropertyDescriptor,ke=(e,t,r,n)=>{for(var a,i=n>1?void 0:n?Te(t,r):t,o=e.length-1;o>=0;o--)(a=e[o])&&(i=(n?a(t,r,i):a(i))||i);return n&&i&&Pe(t,r,i),i};let Ae=class{constructor(e){this.isDestroyed=!1,this.wasmIns=e,this.fontFamily=this.wasmIns.fontFamily,this.fontStyle=this.wasmIns.fontStyle}static create(e,r){const n=t._PAGFont._create(e,r);if(!n)throw new Error("Create PAGFont fail!");return new Ae(n)}static async registerFont(e,t){const r=await I(t);if(!(r&&r.byteLength>0))throw new Error("Initialize PAGFont data not be empty!");const n=new Uint8Array(r),a=new FontFace(e,n);document.fonts.add(a),await a.load()}static registerFallbackFontNames(e=[]){const r=new t.VectorString,n=e.concat(xe);for(const e of n)r.push_back(e);t._PAGFont._SetFallbackFontNames(r),r.delete()}destroy(){this.wasmIns.delete(),this.isDestroyed=!0}};ke([n],Ae,"registerFont",1),Ae=ke([a,r],Ae);let Ie={};const Se=(e,t,r,n=!1)=>{var a;t in Ie||(Ie[t]=[]),null==(a=Ie[t])||a.push({node:e,handler:r,capture:n}),e.addEventListener(t,r,n)},De=(e,t,r)=>{var n;t in Ie&&(null==(n=Ie[t])||n.filter((({node:t,handler:n})=>t===e&&n===r)).forEach((({node:e,handler:r,capture:n})=>e.removeEventListener(t,r,n))))},Le=(e,t)=>{var r,n;t in Ie&&(null==(r=Ie[t])||r.filter((({node:t})=>t===e)).forEach((({node:e,handler:r,capture:n})=>e.removeEventListener(t,r,n))),Ie[t]=null==(n=Ie[t])?void 0:n.filter((({node:t})=>t!==e)))},Fe=navigator.userAgent,Me=/android|adr/i.test(Fe),Re=/(mobile)/i.test(Fe)&&Me;!/(mobile)/i.test(Fe)&&!Re&&/Mac OS X/i.test(Fe);const Be=/(iphone|ipad|ipod)/i.test(Fe),je=/MicroMessenger/i.test(Fe),Oe=/AppleWebKit/i.test(Fe),Ge=e=>new Promise((t=>{const r=()=>{De(e,"canplay",r),clearTimeout(n),t(!0)};Se(e,"canplay",r);const n=setTimeout((()=>{De(e,"canplay",r),t(!1)}),1e3)}));class Ne{constructor(e,r,n,a,i){this.isSought=!1,this.isPlaying=!1,this.canplay=!1,this.disablePlaybackRate=!1,this.error=null,this.player=null,this.videoEl=document.createElement("video"),this.videoEl.style.display="none",this.videoEl.muted=!0,this.videoEl.playsInline=!0,this.videoEl.preload="auto",this.videoEl.width=r,this.videoEl.height=n,Ge(this.videoEl).then((()=>{this.canplay=!0}));const o=new Blob([e],{type:"video/mp4"});this.videoEl.src=URL.createObjectURL(o),this.frameRate=a,this.staticTimeRanges=new $e(i),(3840<r||3840<n)&&(this.disablePlaybackRate=!0),this.linkPlayer(t.currentPlayer)}async prepare(e,t){this.setError(null),this.isSought=!1;const{currentTime:r}=this.videoEl,n=e/this.frameRate;if(0===r&&0===n)this.canplay||Oe?(await this.play(),await new Promise((e=>{requestAnimationFrame((()=>{this.pause(),e()}))}))):await Ge(this.videoEl);else if(Math.round(n*this.frameRate)===Math.round(r*this.frameRate));else{if(this.staticTimeRanges.contains(e))return void await this.seek(n,!1);if(!(Math.abs(r-n)<1/this.frameRate*3))return this.isSought=!0,void await this.seek(n)}const a=Math.min(Math.max(t,.125),4);if(this.disablePlaybackRate||this.videoEl.playbackRate===a||(this.videoEl.playbackRate=a),this.isPlaying&&this.videoEl.paused)try{await this.play()}catch(e){this.setError(e)}}renderToTexture(e,t){var r;if(this.videoEl&&!(this.videoEl.readyState<2)&&null===this.getError())try{const n=null==(r=e.currentContext)?void 0:r.GLctx;n.bindTexture(n.TEXTURE_2D,e.textures[t]),n.pixelStorei(n.UNPACK_ALIGNMENT,4),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.videoEl)}catch(e){this.setError(e)}}async play(){var e;if(this.videoEl.paused){if(je&&window.WeixinJSBridge&&await new Promise((e=>{window.WeixinJSBridge.invoke("getNetworkType",{},(()=>{e()}),(()=>{e()}))})),"visible"!==document.visibilityState){const e=()=>{"visible"===document.visibilityState&&(this.videoEl&&this.videoEl.play(),window.removeEventListener("visibilitychange",e))};throw window.addEventListener("visibilitychange",e),new Error("The play() request was interrupted because the document was hidden!")}await(null==(e=this.videoEl)?void 0:e.play())}}pause(){var e;this.isPlaying=!1,this.videoEl.paused||null==(e=this.videoEl)||e.pause()}stop(){var e;this.isPlaying=!1,this.videoEl.paused||null==(e=this.videoEl)||e.pause(),this.videoEl.currentTime=0}getError(){return this.error}onDestroy(){this.player&&this.player.unlinkVideoReader(this),Le(this.videoEl,"playing"),Le(this.videoEl,"timeupdate"),this.videoEl=null}seek(e,t=!0){return new Promise((r=>{let n=!1,a=null;const i=async()=>{var e;if(t&&this.videoEl.paused)try{await this.play()}catch(e){this.setError(e)}else t||this.videoEl.paused||null==(e=this.videoEl)||e.pause()},o=async()=>{if(!this.videoEl)return this.setError(new Error("Video element doesn't exist!")),void r();De(this.videoEl,"seeked",o),await i(),n=!0,clearTimeout(a),a=null,r()};if(!this.videoEl)return this.setError(new Error("Video element doesn't exist!")),void r();Se(this.videoEl,"seeked",o),this.videoEl.currentTime=e,a=setTimeout((()=>{if(!n){if(!this.videoEl)return this.setError(new Error("Video element doesn't exist!")),void r();De(this.videoEl,"seeked",o),i(),r()}}),1e3/this.frameRate*12)}))}setError(e){this.error=e}linkPlayer(e){this.player=e,e&&e.linkVideoReader(this)}}Ne.isIOS=()=>Be,Ne.isAndroidMiniprogram=()=>!1;class $e{constructor(e){this.timeRanges=e}contains(e){if(0===this.timeRanges.length)return!1;for(let t of this.timeRanges)if(t.start<=e&&e<t.end)return!0;return!1}}const Ue=e=>{const t=new Int32Array(e.data.buffer);return{left:He(t,e.width,e.height),top:Ve(t,e.width,e.height),right:We(t,e.width,e.height),bottom:ze(t,e.width,e.height)}},He=(e,t,r)=>{const n=e.length/t,a=e.length/r;for(let r=0;r<a;r++)for(let a=0;a<n;a++)if(0!==e[r+a*t])return r;return a},Ve=(e,t,r)=>{const n=e.length/t,a=e.length/r;for(let r=0;r<n;r++)for(let n=0;n<a;n++)if(0!==e[r*t+n])return r;return n},We=(e,t,r)=>{const n=e.length/t;for(let a=e.length/r-1;a>0;a--)for(let r=n-1;r>0;r--)if(0!==e[a+t*r])return a;return 0},ze=(e,t,r)=>{const n=e.length/t,a=e.length/r;for(let r=n-1;r>0;r--)for(let n=a-1;n>0;n--)if(0!==e[r*t+n])return r;return 0};class qe{constructor(e,t,r,n=!1,a=!1){this.fontBoundingBoxMap=[],this.fontName=e,this.fontStyle=t,this.size=r,this.fauxBold=n,this.fauxItalic=a,this.loadCanvas()}static setCanvas(e){qe.canvas=e}static setContext(e){qe.context=e}static isEmoji(e){var t;this.testCanvas||(this.testCanvas=W(),this.testCanvas.width=1,this.testCanvas.height=1,this.testContext=this.testCanvas.getContext("2d"),(t=this.testContext).textBaseline="top",t.font="100px -no-font-family-here-",t.scale(.01,.01),t.fillStyle="#000",t.globalCompositeOperation="copy"),this.testContext.fillText(e,0,0);return!this.testContext.getImageData(0,0,1,1).data.toString().includes("0,0,0,")}fontString(){const e=[];this.fauxItalic&&e.push("italic"),this.fauxBold&&e.push("bold"),e.push(`${this.size}px`);const t=xe.concat();return t.unshift(...((e,t="")=>{if(!e)return[];const r=e.split(" ");let n=[];1===r.length?n.push(e):(n.push(r.join("")),n.push(r.join(" ")));const a=n.reduce(((e,r)=>(t?(e.push(`"${r} ${t}"`),e.push(`"${r}-${t}"`)):e.push(`"${r}"`),e)),[]);return""!==t&&a.push(`"${e}"`),a})(this.fontName,this.fontStyle)),e.push(`${t.join(",")}`),e.join(" ")}getTextAdvance(e){const{context:t}=qe;return t.font=this.fontString(),t.measureText(e).width}getTextBounds(e){const{context:t}=qe;t.font=this.fontString();const r=this.measureText(t,e);return{left:Math.floor(-r.actualBoundingBoxLeft),top:Math.floor(-r.actualBoundingBoxAscent),right:Math.ceil(r.actualBoundingBoxRight),bottom:Math.ceil(r.actualBoundingBoxDescent)}}generateFontMetrics(){const{context:e}=qe;e.font=this.fontString();const t=this.measureText(e,"中"),r=t.actualBoundingBoxAscent,n=this.measureText(e,"x").actualBoundingBoxAscent;return{ascent:-t.fontBoundingBoxAscent,descent:t.fontBoundingBoxDescent,xHeight:n,capHeight:r}}generateImage(e,t){const r=W();r.width=t.right-t.left,r.height=t.bottom-t.top;const n=r.getContext("2d");return n.font=this.fontString(),n.fillText(e,-t.left,-t.top),new X(r,!0)}loadCanvas(){qe.canvas||(qe.setCanvas(W()),qe.canvas.width=10,qe.canvas.height=10,qe.setContext(qe.canvas.getContext("2d",{willReadFrequently:!0})))}measureText(e,t){const r=e.measureText(t);if(null==r?void 0:r.actualBoundingBoxAscent)return r;e.canvas.width=1.5*this.size,e.canvas.height=1.5*this.size;const n=[0,this.size];e.clearRect(0,0,e.canvas.width,e.canvas.height),e.font=this.fontString(),e.fillText(t,n[0],n[1]);const a=e.getImageData(0,0,e.canvas.width,e.canvas.height),{left:i,top:o,right:s,bottom:l}=Ue(a);let u;e.clearRect(0,0,e.canvas.width,e.canvas.height);const c=this.fontBoundingBoxMap.find((e=>e.key===this.fontName));if(c)u=c.value;else{e.font=this.fontString(),e.fillText("测",n[0],n[1]);const t=e.getImageData(0,0,e.canvas.width,e.canvas.height);u=Ue(t),this.fontBoundingBoxMap.push({key:this.fontName,value:u}),e.clearRect(0,0,e.canvas.width,e.canvas.height)}return{actualBoundingBoxAscent:n[1]-o,actualBoundingBoxRight:s-n[0],actualBoundingBoxDescent:l-n[1],actualBoundingBoxLeft:n[0]-i,fontBoundingBoxAscent:u.bottom-u.top,fontBoundingBoxDescent:0,width:u.right-u.left}}}class Xe{static create(e,t){return new Xe(W(),e,t)}static getLineCap(e){switch(e){case t.TGFXLineCap.Round:return"round";case t.TGFXLineCap.Square:return"square";default:return"butt"}}static getLineJoin(e){switch(e){case t.TGFXLineJoin.Round:return"round";case t.TGFXLineJoin.Bevel:return"bevel";default:return"miter"}}constructor(e,t,r){this.canvas=e,this.canvas.width=t,this.canvas.height=r,this.context=this.canvas.getContext("2d")}fillPath(e,r){this.context.setTransform(1,0,0,1,0,0),r===t.TGFXPathFillType.InverseWinding||r===t.TGFXPathFillType.InverseEvenOdd?(this.context.clip(e,r===t.TGFXPathFillType.InverseEvenOdd?"evenodd":"nonzero"),this.context.fillRect(0,0,this.canvas.width,this.canvas.height)):this.context.fill(e,r===t.TGFXPathFillType.EvenOdd?"evenodd":"nonzero")}fillText(e,t,r,n){const a=new qe(e.name,e.style,e.size,e.bold,e.italic),i=new w(n);this.context.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.context.font=a.fontString();for(let e=0;e<t.size();e++){const n=r.get(e);this.context.fillText(t.get(e),n.x,n.y)}}strokeText(e,t,r,n,a){if(t.width<.5)return;const i=new qe(e.name,e.style,e.size,e.bold,e.italic),o=new w(a);this.context.setTransform(o.a,o.b,o.c,o.d,o.tx,o.ty),this.context.font=i.fontString(),this.context.lineJoin=Xe.getLineJoin(t.join),this.context.miterLimit=t.miterLimit,this.context.lineCap=Xe.getLineCap(t.cap),this.context.lineWidth=t.width;for(let e=0;e<r.size();e++){const t=n.get(e);this.context.strokeText(r.get(e),t.x,t.y)}}clear(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}update(e){var t;const r=null==(t=e.currentContext)?void 0:t.GLctx;r.pixelStorei(r.UNPACK_ALIGNMENT,1),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.ALPHA,r.UNSIGNED_BYTE,this.canvas)}onDestroy(){z(this.canvas)}}class Je{constructor(){this._canvas=null,this._glContext=null,this.width=$,this.height=$,this.retainCount=0}retain(){if(0===this.retainCount){try{this._canvas=new OffscreenCanvas(0,0)}catch(e){this._canvas=document.createElement("canvas")}this._canvas.width=this.width,this._canvas.height=this.height;const e=this._canvas.getContext("webgl",U);if(!e)throw new Error("Canvas context is not WebGL!");this._glContext=ie.from(e)}this.retainCount+=1}release(){if(this.retainCount-=1,0===this.retainCount){if(!this._glContext)return;this._glContext.destroy(),this._glContext=null,this._canvas=null}}get canvas(){return this._canvas}get glContext(){return this._glContext}setCanvasSize(e=2560,t=2560){this.width=e,this.height=t,this._glContext&&this._canvas&&(this._canvas.width=e,this._canvas.height=t)}}var Ke=Object.defineProperty,Qe=Object.getOwnPropertyDescriptor;let Ye=class extends P{static make(e,r,n=0,a="",i=""){return new Ye("string"==typeof r?t._PAGTextLayer._Make(e,r,n,a,i):t._PAGTextLayer._Make(e,r))}fillColor(){return this.wasmIns._fillColor()}setFillColor(e){this.wasmIns._setFillColor(e)}font(){return new Ae(this.wasmIns._font())}setFont(e){this.wasmIns._setFont(e.wasmIns)}fontSize(){return this.wasmIns._fontSize()}setFontSize(e){this.wasmIns._setFontSize(e)}strokeColor(){return this.wasmIns._strokeColor()}setStrokeColor(e){this.wasmIns._setStrokeColor(e)}text(){return this.wasmIns._text()}setText(e){this.wasmIns._setText(e)}reset(){this.wasmIns._reset()}};Ye=((e,t,r,n)=>{for(var a,i=n>1?void 0:n?Qe(t,r):t,o=e.length-1;o>=0;o--)(a=e[o])&&(i=(n?a(t,r,i):a(i))||i);return n&&i&&Ke(t,r,i),i})([a,r],Ye);var Ze=Object.defineProperty,et=Object.getOwnPropertyDescriptor;let tt=class extends P{static make(e,r,n){const a=t._PAGImageLayer._Make(e,r,n);if(!a)throw new Error("Make PAGImageLayer fail!");return new tt(a)}contentDuration(){return this.wasmIns._contentDuration()}getVideoRanges(){return this.wasmIns._getVideoRanges()}replaceImage(e){this.wasmIns._replaceImage(e.wasmIns)}setImage(e){this.wasmIns._setImage(e.wasmIns)}layerTimeToContent(e){return this.wasmIns._layerTimeToContent(e)}contentTimeToLayer(e){return this.wasmIns._contentTimeToLayer(e)}imageBytes(){return this.wasmIns._imageBytes()}};tt=((e,t,r,n)=>{for(var a,i=n>1?void 0:n?et(t,r):t,o=e.length-1;o>=0;o--)(a=e[o])&&(i=(n?a(t,r,i):a(i))||i);return n&&i&&Ze(t,r,i),i})([a,r],tt);var rt=Object.defineProperty,nt=Object.getOwnPropertyDescriptor;let at=class extends P{static make(e,r,n,a,i){const o=t._PAGSolidLayer._Make(e,r,n,a,i);if(!o)throw new Error("Make PAGSolidLayer fail!");return new at(o)}solidColor(){return this.wasmIns._solidColor()}setSolidColor(e){this.wasmIns._setSolidColor(e)}};at=((e,t,r,n)=>{for(var a,i=n>1?void 0:n?nt(t,r):t,o=e.length-1;o>=0;o--)(a=e[o])&&(i=(n?a(t,r,i):a(i))||i);return n&&i&&rt(t,r,i),i})([a,r],at);const it=e=>{(e=>{t=e})(e),e.PAG=e,e.PAGFile=F,e.PAGPlayer=N,e.PAGView=Ce,e.PAGFont=Ae,e.PAGImage=Y,e.PAGLayer=P,e.PAGComposition=A,e.PAGSurface=B,e.PAGTextLayer=Ye,e.PAGImageLayer=tt,e.PAGSolidLayer=at,e.VideoReader=Ne,e.NativeImage=X,e.ScalerContext=qe,e.WebMask=Xe,e.GlobalCanvas=Je,e.BackendContext=ie,e.Matrix=w,e.RenderCanvas=he,e.traceImage=function(e,t){const r=document.createElement("canvas");r.width=e.width,r.height=e.height;const n=r.getContext("2d"),a=new ImageData(new Uint8ClampedArray(t),r.width,r.height);n.putImageData(a,0,0),document.body.appendChild(r)},e.registerSoftwareDecoderFactory=function(t=null){e._registerSoftwareDecoderFactory(t)},e.SDKVersion=function(){return e._SDKVersion()}};var ot,st=(ot="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){var t,r,n=void 0!==(e=e||{})?e:{};n.ready=new Promise((function(e,n){t=e,r=n}));var a,i,o=Object.assign({},n),s=(e,t)=>{throw t},l="";"undefined"!=typeof document&&document.currentScript&&(l=document.currentScript.src),ot&&(l=ot),l=0!==l.indexOf("blob:")?l.substr(0,l.replace(/[?#].*/,"").lastIndexOf("/")+1):"",a=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},i=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)};var u,c,f=n.print||console.log.bind(console),d=n.printErr||console.warn.bind(console);Object.assign(n,o),o=null,n.arguments&&n.arguments,n.thisProgram&&n.thisProgram,n.quit&&(s=n.quit),n.wasmBinary&&(u=n.wasmBinary),n.noExitRuntime,"object"!=typeof WebAssembly&&H("no native wasm support detected");var h,m=!1;function p(e,t){e||H(t)}var y,v,w,g,_,b,E,C,x,P="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function T(e,t,r){for(var n=t+r,a=t;e[a]&&!(a>=n);)++a;if(a-t>16&&e.buffer&&P)return P.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var l=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|l:(7&o)<<18|s<<12|l<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var u=o-65536;i+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function k(e,t){return e?T(w,e,t):""}function A(e,t,r,n){if(!(n>0))return 0;for(var a=r,i=r+n-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(r>=i)break;t[r++]=s}else if(s<=2047){if(r+1>=i)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=i)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=i)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-a}function I(e,t,r){return A(e,w,t,r)}function S(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t}function D(e){y=e,n.HEAP8=v=new Int8Array(e),n.HEAP16=g=new Int16Array(e),n.HEAP32=b=new Int32Array(e),n.HEAPU8=w=new Uint8Array(e),n.HEAPU16=_=new Uint16Array(e),n.HEAPU32=E=new Uint32Array(e),n.HEAPF32=C=new Float32Array(e),n.HEAPF64=x=new Float64Array(e)}n.INITIAL_MEMORY;var L,F,M,R,B=[],j=[],O=[],G=0,N=null;function $(e){G++,n.monitorRunDependencies&&n.monitorRunDependencies(G)}function U(e){if(G--,n.monitorRunDependencies&&n.monitorRunDependencies(G),0==G&&N){var t=N;N=null,t()}}function H(e){n.onAbort&&n.onAbort(e),d(e="Aborted("+e+")"),m=!0,h=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}function V(e){return e.startsWith("data:application/octet-stream;base64,")}function W(e){try{if(e==L&&u)return new Uint8Array(u);throw"both async and sync fetching of the wasm failed"}catch(e){H(e)}}function z(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function q(e){for(;e.length>0;)e.shift()(n)}function X(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){E[this.ptr+4>>2]=e},this.get_type=function(){return E[this.ptr+4>>2]},this.set_destructor=function(e){E[this.ptr+8>>2]=e},this.get_destructor=function(){return E[this.ptr+8>>2]},this.set_refcount=function(e){b[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,v[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=v[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,v[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=v[this.ptr+13>>0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=b[this.ptr>>2];b[this.ptr>>2]=e+1},this.release_ref=function(){var e=b[this.ptr>>2];return b[this.ptr>>2]=e-1,1===e},this.set_adjusted_ptr=function(e){E[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return E[this.ptr+16>>2]},this.get_exception_ptr=function(){if(wr(this.get_type()))return E[this.excPtr>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}V(L="libpag.wasm")||(F=L,L=n.locateFile?n.locateFile(F,l):l+F);var J={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var r=0,n=e.length-1;n>=0;n--){var a=e[n];"."===a?e.splice(n,1):".."===a?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:e=>{var t=J.isAbs(e),r="/"===e.substr(-1);return(e=J.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=J.splitPath(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=J.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments);return J.normalize(e.join("/"))},join2:(e,t)=>J.normalize(e+"/"+t)},K={resolve:function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:te.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,t=J.isAbs(n)}return(t?"/":"")+(e=J.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||"."},relative:(e,t)=>{function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=K.resolve(e).substr(1),t=K.resolve(t).substr(1);for(var n=r(e.split("/")),a=r(t.split("/")),i=Math.min(n.length,a.length),o=i,s=0;s<i;s++)if(n[s]!==a[s]){o=s;break}var l=[];for(s=o;s<n.length;s++)l.push("..");return(l=l.concat(a.slice(o))).join("/")}};function Q(e,t,r){var n=r>0?r:S(e)+1,a=new Array(n),i=A(e,a,0,a.length);return t&&(a.length=i),a}var Y={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Y.ttys[e]={input:[],output:[],ops:t},te.registerDevice(e,Y.stream_ops)},stream_ops:{open:function(e){var t=Y.ttys[e.node.rdev];if(!t)throw new te.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.fsync(e.tty)},fsync:function(e){e.tty.ops.fsync(e.tty)},read:function(e,t,r,n,a){if(!e.tty||!e.tty.ops.get_char)throw new te.ErrnoError(60);for(var i=0,o=0;o<n;o++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new te.ErrnoError(29)}if(void 0===s&&0===i)throw new te.ErrnoError(6);if(null==s)break;i++,t[r+o]=s}return i&&(e.node.timestamp=Date.now()),i},write:function(e,t,r,n,a){if(!e.tty||!e.tty.ops.put_char)throw new te.ErrnoError(60);try{for(var i=0;i<n;i++)e.tty.ops.put_char(e.tty,t[r+i])}catch(e){throw new te.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=Q(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(f(T(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(f(T(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(d(T(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(d(T(e.output,0)),e.output=[])}}};function Z(e){H()}var ee={ops_table:null,mount:function(e){return ee.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(te.isBlkdev(r)||te.isFIFO(r))throw new te.ErrnoError(63);ee.ops_table||(ee.ops_table={dir:{node:{getattr:ee.node_ops.getattr,setattr:ee.node_ops.setattr,lookup:ee.node_ops.lookup,mknod:ee.node_ops.mknod,rename:ee.node_ops.rename,unlink:ee.node_ops.unlink,rmdir:ee.node_ops.rmdir,readdir:ee.node_ops.readdir,symlink:ee.node_ops.symlink},stream:{llseek:ee.stream_ops.llseek}},file:{node:{getattr:ee.node_ops.getattr,setattr:ee.node_ops.setattr},stream:{llseek:ee.stream_ops.llseek,read:ee.stream_ops.read,write:ee.stream_ops.write,allocate:ee.stream_ops.allocate,mmap:ee.stream_ops.mmap,msync:ee.stream_ops.msync}},link:{node:{getattr:ee.node_ops.getattr,setattr:ee.node_ops.setattr,readlink:ee.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ee.node_ops.getattr,setattr:ee.node_ops.setattr},stream:te.chrdev_stream_ops}});var a=te.createNode(e,t,r,n);return te.isDir(a.mode)?(a.node_ops=ee.ops_table.dir.node,a.stream_ops=ee.ops_table.dir.stream,a.contents={}):te.isFile(a.mode)?(a.node_ops=ee.ops_table.file.node,a.stream_ops=ee.ops_table.file.stream,a.usedBytes=0,a.contents=null):te.isLink(a.mode)?(a.node_ops=ee.ops_table.link.node,a.stream_ops=ee.ops_table.link.stream):te.isChrdev(a.mode)&&(a.node_ops=ee.ops_table.chrdev.node,a.stream_ops=ee.ops_table.chrdev.stream),a.timestamp=Date.now(),e&&(e.contents[t]=a,e.timestamp=a.timestamp),a},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var r=e.contents?e.contents.length:0;if(!(r>=t)){t=Math.max(t,r*(r<1048576?2:1.125)>>>0),0!=r&&(t=Math.max(t,256));var n=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(n.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var r=e.contents;e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=te.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,te.isDir(e.mode)?t.size=4096:te.isFile(e.mode)?t.size=e.usedBytes:te.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&ee.resizeFileStorage(e,t.size)},lookup:function(e,t){throw te.genericErrors[44]},mknod:function(e,t,r,n){return ee.createNode(e,t,r,n)},rename:function(e,t,r){if(te.isDir(e.mode)){var n;try{n=te.lookupNode(t,r)}catch(e){}if(n)for(var a in n.contents)throw new te.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=r,t.contents[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var r=te.lookupNode(e,t);for(var n in r.contents)throw new te.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink:function(e,t,r){var n=ee.createNode(e,t,41471,0);return n.link=r,n},readlink:function(e){if(!te.isLink(e.mode))throw new te.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,r,n,a){var i=e.node.contents;if(a>=e.node.usedBytes)return 0;var o=Math.min(e.node.usedBytes-a,n);if(o>8&&i.subarray)t.set(i.subarray(a,a+o),r);else for(var s=0;s<o;s++)t[r+s]=i[a+s];return o},write:function(e,t,r,n,a,i){if(t.buffer===v.buffer&&(i=!1),!n)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(i)return o.contents=t.subarray(r,r+n),o.usedBytes=n,n;if(0===o.usedBytes&&0===a)return o.contents=t.slice(r,r+n),o.usedBytes=n,n;if(a+n<=o.usedBytes)return o.contents.set(t.subarray(r,r+n),a),n}if(ee.expandFileStorage(o,a+n),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(r,r+n),a);else for(var s=0;s<n;s++)o.contents[a+s]=t[r+s];return o.usedBytes=Math.max(o.usedBytes,a+n),n},llseek:function(e,t,r){var n=t;if(1===r?n+=e.position:2===r&&te.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new te.ErrnoError(28);return n},allocate:function(e,t,r){ee.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap:function(e,t,r,n,a){if(!te.isFile(e.node.mode))throw new te.ErrnoError(43);var i,o,s=e.node.contents;if(2&a||s.buffer!==y){if((r>0||r+t<s.length)&&(s=s.subarray?s.subarray(r,r+t):Array.prototype.slice.call(s,r,r+t)),o=!0,!(i=Z()))throw new te.ErrnoError(48);v.set(s,i)}else o=!1,i=s.byteOffset;return{ptr:i,allocated:o}},msync:function(e,t,r,n,a){if(!te.isFile(e.node.mode))throw new te.ErrnoError(43);return 2&a||ee.stream_ops.write(e,t,0,n,r,!1),0}}},te={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(!(e=K.resolve(te.cwd(),e)))return{path:"",node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new te.ErrnoError(32);for(var r=J.normalizeArray(e.split("/").filter((e=>!!e)),!1),n=te.root,a="/",i=0;i<r.length;i++){var o=i===r.length-1;if(o&&t.parent)break;if(n=te.lookupNode(n,r[i]),a=J.join2(a,r[i]),te.isMountpoint(n)&&(!o||o&&t.follow_mount)&&(n=n.mounted.root),!o||t.follow)for(var s=0;te.isLink(n.mode);){var l=te.readlink(a);if(a=K.resolve(J.dirname(a),l),n=te.lookupPath(a,{recurse_count:t.recurse_count+1}).node,s++>40)throw new te.ErrnoError(32)}}return{path:a,node:n}},getPath:e=>{for(var t;;){if(te.isRoot(e)){var r=e.mount.mountpoint;return t?"/"!==r[r.length-1]?r+"/"+t:r+t:r}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%te.nameTable.length},hashAddNode:e=>{var t=te.hashName(e.parent.id,e.name);e.name_next=te.nameTable[t],te.nameTable[t]=e},hashRemoveNode:e=>{var t=te.hashName(e.parent.id,e.name);if(te.nameTable[t]===e)te.nameTable[t]=e.name_next;else for(var r=te.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode:(e,t)=>{var r=te.mayLookup(e);if(r)throw new te.ErrnoError(r,e);for(var n=te.hashName(e.id,t),a=te.nameTable[n];a;a=a.name_next){var i=a.name;if(a.parent.id===e.id&&i===t)return a}return te.lookup(e,t)},createNode:(e,t,r,n)=>{var a=new te.FSNode(e,t,r,n);return te.hashAddNode(a),a},destroyNode:e=>{te.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>49152==(49152&e),flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=te.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>te.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup:e=>{var t=te.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:(e,t)=>{try{return te.lookupNode(e,t),20}catch(e){}return te.nodePermissions(e,"wx")},mayDelete:(e,t,r)=>{var n;try{n=te.lookupNode(e,t)}catch(e){return e.errno}var a=te.nodePermissions(e,"wx");if(a)return a;if(r){if(!te.isDir(n.mode))return 54;if(te.isRoot(n)||te.getPath(n)===te.cwd())return 10}else if(te.isDir(n.mode))return 31;return 0},mayOpen:(e,t)=>e?te.isLink(e.mode)?32:te.isDir(e.mode)&&("r"!==te.flagsToPermissionString(t)||512&t)?31:te.nodePermissions(e,te.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,t=te.MAX_OPEN_FDS)=>{for(var r=e;r<=t;r++)if(!te.streams[r])return r;throw new te.ErrnoError(33)},getStream:e=>te.streams[e],createStream:(e,t,r)=>{te.FSStream||(te.FSStream=function(){this.shared={}},te.FSStream.prototype={},Object.defineProperties(te.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}},flags:{get:function(){return this.shared.flags},set:function(e){this.shared.flags=e}},position:{get:function(){return this.shared.position},set:function(e){this.shared.position=e}}})),e=Object.assign(new te.FSStream,e);var n=te.nextfd(t,r);return e.fd=n,te.streams[n]=e,e},closeStream:e=>{te.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=te.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new te.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{te.devices[e]={stream_ops:t}},getDevice:e=>te.devices[e],getMounts:e=>{for(var t=[],r=[e];r.length;){var n=r.pop();t.push(n),r.push.apply(r,n.mounts)}return t},syncfs:(e,t)=>{"function"==typeof e&&(t=e,e=!1),te.syncFSRequests++,te.syncFSRequests>1&&d("warning: "+te.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var r=te.getMounts(te.root.mount),n=0;function a(e){return te.syncFSRequests--,t(e)}function i(e){if(e)return i.errored?void 0:(i.errored=!0,a(e));++n>=r.length&&a(null)}r.forEach((t=>{if(!t.type.syncfs)return i(null);t.type.syncfs(t,e,i)}))},mount:(e,t,r)=>{var n,a="/"===r,i=!r;if(a&&te.root)throw new te.ErrnoError(10);if(!a&&!i){var o=te.lookupPath(r,{follow_mount:!1});if(r=o.path,n=o.node,te.isMountpoint(n))throw new te.ErrnoError(10);if(!te.isDir(n.mode))throw new te.ErrnoError(54)}var s={type:e,opts:t,mountpoint:r,mounts:[]},l=e.mount(s);return l.mount=s,s.root=l,a?te.root=l:n&&(n.mounted=s,n.mount&&n.mount.mounts.push(s)),l},unmount:e=>{var t=te.lookupPath(e,{follow_mount:!1});if(!te.isMountpoint(t.node))throw new te.ErrnoError(28);var r=t.node,n=r.mounted,a=te.getMounts(n);Object.keys(te.nameTable).forEach((e=>{for(var t=te.nameTable[e];t;){var r=t.name_next;a.includes(t.mount)&&te.destroyNode(t),t=r}})),r.mounted=null;var i=r.mount.mounts.indexOf(n);r.mount.mounts.splice(i,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,r)=>{var n=te.lookupPath(e,{parent:!0}).node,a=J.basename(e);if(!a||"."===a||".."===a)throw new te.ErrnoError(28);var i=te.mayCreate(n,a);if(i)throw new te.ErrnoError(i);if(!n.node_ops.mknod)throw new te.ErrnoError(63);return n.node_ops.mknod(n,a,t,r)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,te.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,te.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var r=e.split("/"),n="",a=0;a<r.length;++a)if(r[a]){n+="/"+r[a];try{te.mkdir(n,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,r)=>(void 0===r&&(r=t,t=438),t|=8192,te.mknod(e,t,r)),symlink:(e,t)=>{if(!K.resolve(e))throw new te.ErrnoError(44);var r=te.lookupPath(t,{parent:!0}).node;if(!r)throw new te.ErrnoError(44);var n=J.basename(t),a=te.mayCreate(r,n);if(a)throw new te.ErrnoError(a);if(!r.node_ops.symlink)throw new te.ErrnoError(63);return r.node_ops.symlink(r,n,e)},rename:(e,t)=>{var r,n,a=J.dirname(e),i=J.dirname(t),o=J.basename(e),s=J.basename(t);if(r=te.lookupPath(e,{parent:!0}).node,n=te.lookupPath(t,{parent:!0}).node,!r||!n)throw new te.ErrnoError(44);if(r.mount!==n.mount)throw new te.ErrnoError(75);var l,u=te.lookupNode(r,o),c=K.relative(e,i);if("."!==c.charAt(0))throw new te.ErrnoError(28);if("."!==(c=K.relative(t,a)).charAt(0))throw new te.ErrnoError(55);try{l=te.lookupNode(n,s)}catch(e){}if(u!==l){var f=te.isDir(u.mode),d=te.mayDelete(r,o,f);if(d)throw new te.ErrnoError(d);if(d=l?te.mayDelete(n,s,f):te.mayCreate(n,s))throw new te.ErrnoError(d);if(!r.node_ops.rename)throw new te.ErrnoError(63);if(te.isMountpoint(u)||l&&te.isMountpoint(l))throw new te.ErrnoError(10);if(n!==r&&(d=te.nodePermissions(r,"w")))throw new te.ErrnoError(d);te.hashRemoveNode(u);try{r.node_ops.rename(u,n,s)}catch(e){throw e}finally{te.hashAddNode(u)}}},rmdir:e=>{var t=te.lookupPath(e,{parent:!0}).node,r=J.basename(e),n=te.lookupNode(t,r),a=te.mayDelete(t,r,!0);if(a)throw new te.ErrnoError(a);if(!t.node_ops.rmdir)throw new te.ErrnoError(63);if(te.isMountpoint(n))throw new te.ErrnoError(10);t.node_ops.rmdir(t,r),te.destroyNode(n)},readdir:e=>{var t=te.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new te.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var t=te.lookupPath(e,{parent:!0}).node;if(!t)throw new te.ErrnoError(44);var r=J.basename(e),n=te.lookupNode(t,r),a=te.mayDelete(t,r,!1);if(a)throw new te.ErrnoError(a);if(!t.node_ops.unlink)throw new te.ErrnoError(63);if(te.isMountpoint(n))throw new te.ErrnoError(10);t.node_ops.unlink(t,r),te.destroyNode(n)},readlink:e=>{var t=te.lookupPath(e).node;if(!t)throw new te.ErrnoError(44);if(!t.node_ops.readlink)throw new te.ErrnoError(28);return K.resolve(te.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,t)=>{var r=te.lookupPath(e,{follow:!t}).node;if(!r)throw new te.ErrnoError(44);if(!r.node_ops.getattr)throw new te.ErrnoError(63);return r.node_ops.getattr(r)},lstat:e=>te.stat(e,!0),chmod:(e,t,r)=>{var n;if(!(n="string"==typeof e?te.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new te.ErrnoError(63);n.node_ops.setattr(n,{mode:4095&t|-4096&n.mode,timestamp:Date.now()})},lchmod:(e,t)=>{te.chmod(e,t,!0)},fchmod:(e,t)=>{var r=te.getStream(e);if(!r)throw new te.ErrnoError(8);te.chmod(r.node,t)},chown:(e,t,r,n)=>{var a;if(!(a="string"==typeof e?te.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new te.ErrnoError(63);a.node_ops.setattr(a,{timestamp:Date.now()})},lchown:(e,t,r)=>{te.chown(e,t,r,!0)},fchown:(e,t,r)=>{var n=te.getStream(e);if(!n)throw new te.ErrnoError(8);te.chown(n.node,t,r)},truncate:(e,t)=>{if(t<0)throw new te.ErrnoError(28);var r;if(!(r="string"==typeof e?te.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new te.ErrnoError(63);if(te.isDir(r.mode))throw new te.ErrnoError(31);if(!te.isFile(r.mode))throw new te.ErrnoError(28);var n=te.nodePermissions(r,"w");if(n)throw new te.ErrnoError(n);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var r=te.getStream(e);if(!r)throw new te.ErrnoError(8);if(0==(2097155&r.flags))throw new te.ErrnoError(28);te.truncate(r.node,t)},utime:(e,t,r)=>{var n=te.lookupPath(e,{follow:!0}).node;n.node_ops.setattr(n,{timestamp:Math.max(t,r)})},open:(e,t,r)=>{if(""===e)throw new te.ErrnoError(44);var a;if(r=void 0===r?438:r,r=64&(t="string"==typeof t?te.modeStringToFlags(t):t)?4095&r|32768:0,"object"==typeof e)a=e;else{e=J.normalize(e);try{a=te.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var i=!1;if(64&t)if(a){if(128&t)throw new te.ErrnoError(20)}else a=te.mknod(e,r,0),i=!0;if(!a)throw new te.ErrnoError(44);if(te.isChrdev(a.mode)&&(t&=-513),65536&t&&!te.isDir(a.mode))throw new te.ErrnoError(54);if(!i){var o=te.mayOpen(a,t);if(o)throw new te.ErrnoError(o)}512&t&&!i&&te.truncate(a,0),t&=-131713;var s=te.createStream({node:a,path:te.getPath(a),flags:t,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1});return s.stream_ops.open&&s.stream_ops.open(s),!n.logReadFiles||1&t||(te.readFiles||(te.readFiles={}),e in te.readFiles||(te.readFiles[e]=1)),s},close:e=>{if(te.isClosed(e))throw new te.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{te.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek:(e,t,r)=>{if(te.isClosed(e))throw new te.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new te.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new te.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read:(e,t,r,n,a)=>{if(n<0||a<0)throw new te.ErrnoError(28);if(te.isClosed(e))throw new te.ErrnoError(8);if(1==(2097155&e.flags))throw new te.ErrnoError(8);if(te.isDir(e.node.mode))throw new te.ErrnoError(31);if(!e.stream_ops.read)throw new te.ErrnoError(28);var i=void 0!==a;if(i){if(!e.seekable)throw new te.ErrnoError(70)}else a=e.position;var o=e.stream_ops.read(e,t,r,n,a);return i||(e.position+=o),o},write:(e,t,r,n,a,i)=>{if(n<0||a<0)throw new te.ErrnoError(28);if(te.isClosed(e))throw new te.ErrnoError(8);if(0==(2097155&e.flags))throw new te.ErrnoError(8);if(te.isDir(e.node.mode))throw new te.ErrnoError(31);if(!e.stream_ops.write)throw new te.ErrnoError(28);e.seekable&&1024&e.flags&&te.llseek(e,0,2);var o=void 0!==a;if(o){if(!e.seekable)throw new te.ErrnoError(70)}else a=e.position;var s=e.stream_ops.write(e,t,r,n,a,i);return o||(e.position+=s),s},allocate:(e,t,r)=>{if(te.isClosed(e))throw new te.ErrnoError(8);if(t<0||r<=0)throw new te.ErrnoError(28);if(0==(2097155&e.flags))throw new te.ErrnoError(8);if(!te.isFile(e.node.mode)&&!te.isDir(e.node.mode))throw new te.ErrnoError(43);if(!e.stream_ops.allocate)throw new te.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap:(e,t,r,n,a)=>{if(0!=(2&n)&&0==(2&a)&&2!=(2097155&e.flags))throw new te.ErrnoError(2);if(1==(2097155&e.flags))throw new te.ErrnoError(2);if(!e.stream_ops.mmap)throw new te.ErrnoError(43);return e.stream_ops.mmap(e,t,r,n,a)},msync:(e,t,r,n,a)=>e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,n,a):0,munmap:e=>0,ioctl:(e,t,r)=>{if(!e.stream_ops.ioctl)throw new te.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var r,n=te.open(e,t.flags),a=te.stat(e).size,i=new Uint8Array(a);return te.read(n,i,0,a,0),"utf8"===t.encoding?r=T(i,0):"binary"===t.encoding&&(r=i),te.close(n),r},writeFile:(e,t,r={})=>{r.flags=r.flags||577;var n=te.open(e,r.flags,r.mode);if("string"==typeof t){var a=new Uint8Array(S(t)+1),i=A(t,a,0,a.length);te.write(n,a,0,i,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");te.write(n,t,0,t.byteLength,void 0,r.canOwn)}te.close(n)},cwd:()=>te.currentPath,chdir:e=>{var t=te.lookupPath(e,{follow:!0});if(null===t.node)throw new te.ErrnoError(44);if(!te.isDir(t.node.mode))throw new te.ErrnoError(54);var r=te.nodePermissions(t.node,"x");if(r)throw new te.ErrnoError(r);te.currentPath=t.path},createDefaultDirectories:()=>{te.mkdir("/tmp"),te.mkdir("/home"),te.mkdir("/home/web_user")},createDefaultDevices:()=>{te.mkdir("/dev"),te.registerDevice(te.makedev(1,3),{read:()=>0,write:(e,t,r,n,a)=>n}),te.mkdev("/dev/null",te.makedev(1,3)),Y.register(te.makedev(5,0),Y.default_tty_ops),Y.register(te.makedev(6,0),Y.default_tty1_ops),te.mkdev("/dev/tty",te.makedev(5,0)),te.mkdev("/dev/tty1",te.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}return()=>H("randomDevice")}();te.createDevice("/dev","random",e),te.createDevice("/dev","urandom",e),te.mkdir("/dev/shm"),te.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{te.mkdir("/proc");var e=te.mkdir("/proc/self");te.mkdir("/proc/self/fd"),te.mount({mount:()=>{var t=te.createNode(e,"fd",16895,73);return t.node_ops={lookup:(e,t)=>{var r=+t,n=te.getStream(r);if(!n)throw new te.ErrnoError(8);var a={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>n.path}};return a.parent=a,a}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{n.stdin?te.createDevice("/dev","stdin",n.stdin):te.symlink("/dev/tty","/dev/stdin"),n.stdout?te.createDevice("/dev","stdout",null,n.stdout):te.symlink("/dev/tty","/dev/stdout"),n.stderr?te.createDevice("/dev","stderr",null,n.stderr):te.symlink("/dev/tty1","/dev/stderr"),te.open("/dev/stdin",0),te.open("/dev/stdout",1),te.open("/dev/stderr",1)},ensureErrnoError:()=>{te.ErrnoError||(te.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},te.ErrnoError.prototype=new Error,te.ErrnoError.prototype.constructor=te.ErrnoError,[44].forEach((e=>{te.genericErrors[e]=new te.ErrnoError(e),te.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:()=>{te.ensureErrnoError(),te.nameTable=new Array(4096),te.mount(ee,{},"/"),te.createDefaultDirectories(),te.createDefaultDevices(),te.createSpecialDirectories(),te.filesystems={MEMFS:ee}},init:(e,t,r)=>{te.init.initialized=!0,te.ensureErrnoError(),n.stdin=e||n.stdin,n.stdout=t||n.stdout,n.stderr=r||n.stderr,te.createStandardStreams()},quit:()=>{te.init.initialized=!1;for(var e=0;e<te.streams.length;e++){var t=te.streams[e];t&&te.close(t)}},getMode:(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},findObject:(e,t)=>{var r=te.analyzePath(e,t);return r.exists?r.object:null},analyzePath:(e,t)=>{try{e=(n=te.lookupPath(e,{follow:!t})).path}catch(e){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=te.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=J.basename(e),n=te.lookupPath(e,{follow:!t}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot="/"===n.path}catch(e){r.error=e.errno}return r},createPath:(e,t,r,n)=>{e="string"==typeof e?e:te.getPath(e);for(var a=t.split("/").reverse();a.length;){var i=a.pop();if(i){var o=J.join2(e,i);try{te.mkdir(o)}catch(e){}e=o}}return o},createFile:(e,t,r,n,a)=>{var i=J.join2("string"==typeof e?e:te.getPath(e),t),o=te.getMode(n,a);return te.create(i,o)},createDataFile:(e,t,r,n,a,i)=>{var o=t;e&&(e="string"==typeof e?e:te.getPath(e),o=t?J.join2(e,t):e);var s=te.getMode(n,a),l=te.create(o,s);if(r){if("string"==typeof r){for(var u=new Array(r.length),c=0,f=r.length;c<f;++c)u[c]=r.charCodeAt(c);r=u}te.chmod(l,146|s);var d=te.open(l,577);te.write(d,r,0,r.length,0,i),te.close(d),te.chmod(l,s)}return l},createDevice:(e,t,r,n)=>{var a=J.join2("string"==typeof e?e:te.getPath(e),t),i=te.getMode(!!r,!!n);te.createDevice.major||(te.createDevice.major=64);var o=te.makedev(te.createDevice.major++,0);return te.registerDevice(o,{open:e=>{e.seekable=!1},close:e=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(e,t,n,a,i)=>{for(var o=0,s=0;s<a;s++){var l;try{l=r()}catch(e){throw new te.ErrnoError(29)}if(void 0===l&&0===o)throw new te.ErrnoError(6);if(null==l)break;o++,t[n+s]=l}return o&&(e.node.timestamp=Date.now()),o},write:(e,t,r,a,i)=>{for(var o=0;o<a;o++)try{n(t[r+o])}catch(e){throw new te.ErrnoError(29)}return a&&(e.node.timestamp=Date.now()),o}}),te.mkdev(a,i,o)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!a)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=Q(a(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new te.ErrnoError(29)}},createLazyFile:(e,t,r,n,a)=>{function i(){this.lengthKnown=!1,this.chunks=[]}if(i.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]}},i.prototype.setDataGetter=function(e){this.getter=e},i.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",r,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+r+". Status: "+e.status);var t,n=Number(e.getResponseHeader("Content-length")),a=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,i=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,o=1048576;a||(o=n);var s=this;s.setDataGetter((e=>{var t=e*o,a=(e+1)*o-1;if(a=Math.min(a,n-1),void 0===s.chunks[e]&&(s.chunks[e]=((e,t)=>{if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>n-1)throw new Error("only "+n+" bytes available! programmer error!");var a=new XMLHttpRequest;if(a.open("GET",r,!1),n!==o&&a.setRequestHeader("Range","bytes="+e+"-"+t),a.responseType="arraybuffer",a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined"),a.send(null),!(a.status>=200&&a.status<300||304===a.status))throw new Error("Couldn't load "+r+". Status: "+a.status);return void 0!==a.response?new Uint8Array(a.response||[]):Q(a.responseText||"",!0)})(t,a)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]})),!i&&n||(o=n=1,n=this.getter(0).length,o=n,f("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=o,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o={isDevice:!1,url:r},s=te.createFile(e,t,o,n,a);o.contents?s.contents=o.contents:o.url&&(s.contents=null,s.url=o.url),Object.defineProperties(s,{usedBytes:{get:function(){return this.contents.length}}});var l={};function u(e,t,r,n,a){var i=e.node.contents;if(a>=i.length)return 0;var o=Math.min(i.length-a,n);if(i.slice)for(var s=0;s<o;s++)t[r+s]=i[a+s];else for(s=0;s<o;s++)t[r+s]=i.get(a+s);return o}return Object.keys(s.stream_ops).forEach((e=>{var t=s.stream_ops[e];l[e]=function(){return te.forceLoadFile(s),t.apply(null,arguments)}})),l.read=(e,t,r,n,a)=>(te.forceLoadFile(s),u(e,t,r,n,a)),l.mmap=(e,t,r,n,a)=>{te.forceLoadFile(s);var i=Z();if(!i)throw new te.ErrnoError(48);return u(e,v,i,t,r),{ptr:i,allocated:!0}},s.stream_ops=l,s},createPreloadedFile:(e,t,r,n,a,o,s,l,u,c)=>{var f=t?K.resolve(J.join2(e,t)):e;function d(r){function i(r){c&&c(),l||te.createDataFile(e,t,r,n,a,u),o&&o(),U()}Browser.handledByPreloadPlugin(r,f,i,(()=>{s&&s(),U()}))||i(r)}$(),"string"==typeof r?function(e,t,r,n){var a=n?"":"al "+e;i(e,(r=>{p(r,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(r)),a&&U()}),(t=>{if(!r)throw'Loading data file "'+e+'" failed.';r()})),a&&$()}(r,(e=>d(e)),s):d(r)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,t,r)=>{t=t||(()=>{}),r=r||(()=>{});var n=te.indexedDB();try{var a=n.open(te.DB_NAME(),te.DB_VERSION)}catch(e){return r(e)}a.onupgradeneeded=()=>{f("creating db"),a.result.createObjectStore(te.DB_STORE_NAME)},a.onsuccess=()=>{var n=a.result.transaction([te.DB_STORE_NAME],"readwrite"),i=n.objectStore(te.DB_STORE_NAME),o=0,s=0,l=e.length;function u(){0==s?t():r()}e.forEach((e=>{var t=i.put(te.analyzePath(e).object.contents,e);t.onsuccess=()=>{++o+s==l&&u()},t.onerror=()=>{s++,o+s==l&&u()}})),n.onerror=r},a.onerror=r},loadFilesFromDB:(e,t,r)=>{t=t||(()=>{}),r=r||(()=>{});var n=te.indexedDB();try{var a=n.open(te.DB_NAME(),te.DB_VERSION)}catch(e){return r(e)}a.onupgradeneeded=r,a.onsuccess=()=>{var n=a.result;try{var i=n.transaction([te.DB_STORE_NAME],"readonly")}catch(e){return void r(e)}var o=i.objectStore(te.DB_STORE_NAME),s=0,l=0,u=e.length;function c(){0==l?t():r()}e.forEach((e=>{var t=o.get(e);t.onsuccess=()=>{te.analyzePath(e).exists&&te.unlink(e),te.createDataFile(J.dirname(e),J.basename(e),t.result,!0,!0,!0),++s+l==u&&c()},t.onerror=()=>{l++,s+l==u&&c()}})),i.onerror=r},a.onerror=r}},re={DEFAULT_POLLMASK:5,calculateAt:function(e,t,r){if(J.isAbs(t))return t;var n;if(n=-100===e?te.cwd():re.getStreamFromFD(e).path,0==t.length){if(!r)throw new te.ErrnoError(44);return n}return J.join2(n,t)},doStat:function(e,t,r){try{var n=e(t)}catch(e){if(e&&e.node&&J.normalize(t)!==J.normalize(te.getPath(e.node)))return-54;throw e}return b[r>>2]=n.dev,b[r+8>>2]=n.ino,b[r+12>>2]=n.mode,E[r+16>>2]=n.nlink,b[r+20>>2]=n.uid,b[r+24>>2]=n.gid,b[r+28>>2]=n.rdev,R=[n.size>>>0,(M=n.size,+Math.abs(M)>=1?M>0?(0|Math.min(+Math.floor(M/4294967296),4294967295))>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],b[r+40>>2]=R[0],b[r+44>>2]=R[1],b[r+48>>2]=4096,b[r+52>>2]=n.blocks,R=[Math.floor(n.atime.getTime()/1e3)>>>0,(M=Math.floor(n.atime.getTime()/1e3),+Math.abs(M)>=1?M>0?(0|Math.min(+Math.floor(M/4294967296),4294967295))>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],b[r+56>>2]=R[0],b[r+60>>2]=R[1],E[r+64>>2]=0,R=[Math.floor(n.mtime.getTime()/1e3)>>>0,(M=Math.floor(n.mtime.getTime()/1e3),+Math.abs(M)>=1?M>0?(0|Math.min(+Math.floor(M/4294967296),4294967295))>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],b[r+72>>2]=R[0],b[r+76>>2]=R[1],E[r+80>>2]=0,R=[Math.floor(n.ctime.getTime()/1e3)>>>0,(M=Math.floor(n.ctime.getTime()/1e3),+Math.abs(M)>=1?M>0?(0|Math.min(+Math.floor(M/4294967296),4294967295))>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],b[r+88>>2]=R[0],b[r+92>>2]=R[1],E[r+96>>2]=0,R=[n.ino>>>0,(M=n.ino,+Math.abs(M)>=1?M>0?(0|Math.min(+Math.floor(M/4294967296),4294967295))>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],b[r+104>>2]=R[0],b[r+108>>2]=R[1],0},doMsync:function(e,t,r,n,a){var i=w.slice(e,e+r);te.msync(t,i,a,r,n)},varargs:void 0,get:function(){return re.varargs+=4,b[re.varargs-4>>2]},getStr:function(e){return k(e)},getStreamFromFD:function(e){var t=te.getStream(e);if(!t)throw new te.ErrnoError(8);return t}},ne={};function ae(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function ie(e){return this.fromWireType(b[e>>2])}var oe={},se={},le={};function ue(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?"_"+e:e}function ce(e,t){return e=ue(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function fe(e,t){var r=ce(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var de=void 0;function he(e){throw new de(e)}function me(e,t,r){function n(t){var n=r(t);n.length!==e.length&&he("Mismatched type converter count");for(var a=0;a<e.length;++a)_e(e[a],n[a])}e.forEach((function(e){le[e]=t}));var a=new Array(t.length),i=[],o=0;t.forEach(((e,t)=>{se.hasOwnProperty(e)?a[t]=se[e]:(i.push(e),oe.hasOwnProperty(e)||(oe[e]=[]),oe[e].push((()=>{a[t]=se[e],++o===i.length&&n(a)})))})),0===i.length&&n(a)}function pe(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var ye=void 0;function ve(e){for(var t="",r=e;w[r];)t+=ye[w[r++]];return t}var we=void 0;function ge(e){throw new we(e)}function _e(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||ge('type "'+n+'" must have a positive integer typeid pointer'),se.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;ge("Cannot register type '"+n+"' twice")}if(se[e]=t,delete le[e],oe.hasOwnProperty(e)){var a=oe[e];delete oe[e],a.forEach((e=>e()))}}function be(e){if(!(this instanceof He))return!1;if(!(e instanceof He))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,a=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)a=n.upcast(a),n=n.baseClass;return t===n&&r===a}function Ee(e){ge(e.$$.ptrType.registeredClass.name+" instance already deleted")}var Ce=!1;function xe(e){}function Pe(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function Te(e,t,r){if(t===r)return e;if(void 0===r.baseClass)return null;var n=Te(e,t,r.baseClass);return null===n?null:r.downcast(n)}var ke={};function Ae(){return Object.keys(Me).length}function Ie(){var e=[];for(var t in Me)Me.hasOwnProperty(t)&&e.push(Me[t]);return e}var Se=[];function De(){for(;Se.length;){var e=Se.pop();e.$$.deleteScheduled=!1,e.delete()}}var Le=void 0;function Fe(e){Le=e,Se.length&&Le&&Le(De)}var Me={};function Re(e,t){return t=function(e,t){for(void 0===t&&ge("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),Me[t]}function Be(e,t){return t.ptrType&&t.ptr||he("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&he("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Oe(Object.create(e,{$$:{value:t}}))}function je(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=Re(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function a(){return this.isSmartPointer?Be(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Be(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var i,o=this.registeredClass.getActualType(t),s=ke[o];if(!s)return a.call(this);i=this.isConst?s.constPointerType:s.pointerType;var l=Te(t,this.registeredClass,i.registeredClass);return null===l?a.call(this):this.isSmartPointer?Be(i.registeredClass.instancePrototype,{ptrType:i,ptr:l,smartPtrType:this,smartPtr:e}):Be(i.registeredClass.instancePrototype,{ptrType:i,ptr:l})}function Oe(e){return"undefined"==typeof FinalizationRegistry?(Oe=e=>e,e):(Ce=new FinalizationRegistry((e=>{Pe(e.$$)})),xe=e=>Ce.unregister(e),(Oe=e=>{var t=e.$$;if(t.smartPtr){var r={$$:t};Ce.register(e,r,e)}return e})(e))}function Ge(){if(this.$$.ptr||Ee(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,t=Oe(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function Ne(){this.$$.ptr||Ee(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ge("Object already scheduled for deletion"),xe(this),Pe(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function $e(){return!this.$$.ptr}function Ue(){return this.$$.ptr||Ee(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ge("Object already scheduled for deletion"),Se.push(this),1===Se.length&&Le&&Le(De),this.$$.deleteScheduled=!0,this}function He(){}function Ve(e,t,r){if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||ge("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}}function We(e,t,r){n.hasOwnProperty(e)?((void 0===r||void 0!==n[e].overloadTable&&void 0!==n[e].overloadTable[r])&&ge("Cannot register public name '"+e+"' twice"),Ve(n,e,e),n.hasOwnProperty(r)&&ge("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),n[e].overloadTable[r]=t):(n[e]=t,void 0!==r&&(n[e].numArguments=r))}function ze(e,t,r,n,a,i,o,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=a,this.getActualType=i,this.upcast=o,this.downcast=s,this.pureVirtualFunctions=[]}function qe(e,t,r){for(;t!==r;)t.upcast||ge("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function Xe(e,t){if(null===t)return this.isReference&&ge("null is not a valid "+this.name),0;t.$$||ge('Cannot pass "'+Ct(t)+'" as a '+this.name),t.$$.ptr||ge("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass;return qe(t.$$.ptr,r,this.registeredClass)}function Je(e,t){var r;if(null===t)return this.isReference&&ge("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t.$$||ge('Cannot pass "'+Ct(t)+'" as a '+this.name),t.$$.ptr||ge("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&ge("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;if(r=qe(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&ge("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:ge("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var a=t.clone();r=this.rawShare(r,_t.toHandle((function(){a.delete()}))),null!==e&&e.push(this.rawDestructor,r)}break;default:ge("Unsupporting sharing policy")}return r}function Ke(e,t){if(null===t)return this.isReference&&ge("null is not a valid "+this.name),0;t.$$||ge('Cannot pass "'+Ct(t)+'" as a '+this.name),t.$$.ptr||ge("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&ge("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;return qe(t.$$.ptr,r,this.registeredClass)}function Qe(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Ye(e){this.rawDestructor&&this.rawDestructor(e)}function Ze(e){null!==e&&e.delete()}function et(e,t,r,n,a,i,o,s,l,u,c){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=a,this.pointeeType=i,this.sharingPolicy=o,this.rawGetPointee=s,this.rawConstructor=l,this.rawShare=u,this.rawDestructor=c,a||void 0!==t.baseClass?this.toWireType=Je:n?(this.toWireType=Xe,this.destructorFunction=null):(this.toWireType=Ke,this.destructorFunction=null)}function tt(e,t,r){n.hasOwnProperty(e)||he("Replacing nonexistant public symbol"),void 0!==n[e].overloadTable&&void 0!==r?n[e].overloadTable[r]=t:(n[e]=t,n[e].argCount=r)}function rt(e,t,r){return function(e,t,r){var a=n["dynCall_"+e];return r&&r.length?a.apply(null,[t].concat(r)):a.call(null,t)}(e,t,r)}function nt(e,t){e=ve(e);var r,n,a,i=(r=e,n=t,a=[],function(){return a.length=0,Object.assign(a,arguments),rt(r,n,a)});return"function"!=typeof i&&ge("unknown function pointer with signature "+e+": "+t),i}var at=void 0;function it(e){var t=yr(e),r=ve(t);return mr(t),r}function st(e,t){var r=[],n={};throw t.forEach((function e(t){n[t]||se[t]||(le[t]?le[t].forEach(e):(r.push(t),n[t]=!0))})),new at(e+": "+r.map(it).join([", "]))}function lt(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=ce(e.name||"unknownFunctionName",(function(){}));r.prototype=e.prototype;var n=new r,a=e.apply(n,t);return a instanceof Object?a:n}function ut(e){try{return e()}catch(e){H(e)}}function ct(e){if(!m)try{e()}catch(e){!function(e){if(e instanceof z||"unwind"==e)return h;s(1,e)}(e)}}var ft={State:{Normal:0,Unwinding:1,Rewinding:2,Disabled:3},state:0,StackSize:4096,currData:null,handleSleepReturnValue:0,exportCallStack:[],callStackNameToId:{},callStackIdToName:{},callStackId:0,asyncPromiseHandlers:null,sleepCallbacks:[],getCallStackId:function(e){var t=ft.callStackNameToId[e];return void 0===t&&(t=ft.callStackId++,ft.callStackNameToId[e]=t,ft.callStackIdToName[t]=e),t},instrumentWasmImports:function(e){var t,r,n=["env.invoke_*","env.emscripten_sleep","env.emscripten_wget","env.emscripten_wget_data","env.emscripten_idb_load","env.emscripten_idb_store","env.emscripten_idb_delete","env.emscripten_idb_exists","env.emscripten_idb_load_blob","env.emscripten_idb_store_blob","env.SDL_Delay","env.emscripten_scan_registers","env.emscripten_lazy_load_code","env.emscripten_fiber_swap","wasi_snapshot_preview1.fd_sync","env.__wasi_fd_sync","env._emval_await","env._dlopen_js","env.__asyncjs__*"].map((e=>e.split(".")[1]));for(var a in e)r=void 0,(r=e[t=a]).sig,"function"==typeof r&&(n.indexOf(t)>=0||t.startsWith("__asyncjs__"))},instrumentWasmExports:function(e){var t={};for(var r in e)!function(r){var n=e[r];t[r]="function"==typeof n?function(){ft.exportCallStack.push(r);try{return n.apply(null,arguments)}finally{if(!m){var e=ft.exportCallStack.pop();p(e===r),ft.maybeStopUnwind()}}}:n}(r);return t},maybeStopUnwind:function(){ft.currData&&ft.state===ft.State.Unwinding&&0===ft.exportCallStack.length&&(ft.state=ft.State.Normal,ut(br),"undefined"!=typeof Fibers&&Fibers.trampoline())},whenDone:function(){return new Promise(((e,t)=>{ft.asyncPromiseHandlers={resolve:e,reject:t}}))},allocateData:function(){var e=pr(12+ft.StackSize);return ft.setDataHeader(e,e+12,ft.StackSize),ft.setDataRewindFunc(e),e},setDataHeader:function(e,t,r){b[e>>2]=t,b[e+4>>2]=t+r},setDataRewindFunc:function(e){var t=ft.exportCallStack[0],r=ft.getCallStackId(t);b[e+8>>2]=r},getDataRewindFunc:function(e){var t=b[e+8>>2],r=ft.callStackIdToName[t];return n.asm[r]},doRewind:function(e){return ft.getDataRewindFunc(e)()},handleSleep:function(e){if(!m){if(ft.state===ft.State.Normal){var t=!1,r=!1;e((e=>{if(!m&&(ft.handleSleepReturnValue=e||0,t=!0,r)){ft.state=ft.State.Rewinding,ut((()=>Er(ft.currData))),"undefined"!=typeof Browser&&Browser.mainLoop.func&&Browser.mainLoop.resume();var n,a=!1;try{n=ft.doRewind(ft.currData)}catch(e){n=e,a=!0}var i=!1;if(!ft.currData){var o=ft.asyncPromiseHandlers;o&&(ft.asyncPromiseHandlers=null,(a?o.reject:o.resolve)(n),i=!0)}if(a&&!i)throw n}})),r=!0,t||(ft.state=ft.State.Unwinding,ft.currData=ft.allocateData(),"undefined"!=typeof Browser&&Browser.mainLoop.func&&Browser.mainLoop.pause(),ut((()=>_r(ft.currData))))}else ft.state===ft.State.Rewinding?(ft.state=ft.State.Normal,ut(Cr),mr(ft.currData),ft.currData=null,ft.sleepCallbacks.forEach((e=>ct(e)))):H("invalid state: "+ft.state);return ft.handleSleepReturnValue}},handleAsync:function(e){return ft.handleSleep((t=>{e().then(t)}))}};function dt(e,t,r,n,a){var i=t.length;i<2&&ge("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==t[1]&&null!==r,s=!1,l=1;l<t.length;++l)if(null!==t[l]&&void 0===t[l].destructorFunction){s=!0;break}var u="void"!==t[0].name,c="",f="";for(l=0;l<i-2;++l)c+=(0!==l?", ":"")+"arg"+l,f+=(0!==l?", ":"")+"arg"+l+"Wired";var d="return function "+ue(e)+"("+c+") {\nif (arguments.length !== "+(i-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(i-2)+" args!');\n}\n";s&&(d+="var destructors = [];\n");var h=s?"destructors":"null",m=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],p=[ge,n,a,ae,t[0],t[1]];for(o&&(d+="var thisWired = classParam.toWireType("+h+", this);\n"),l=0;l<i-2;++l)d+="var arg"+l+"Wired = argType"+l+".toWireType("+h+", arg"+l+"); // "+t[l+2].name+"\n",m.push("argType"+l),p.push(t[l+2]);if(o&&(f="thisWired"+(f.length>0?", ":"")+f),d+=(u?"var rv = ":"")+"invoker(fn"+(f.length>0?", ":"")+f+");\n",m.push("Asyncify"),p.push(ft),d+="function onDone("+(u?"rv":"")+") {\n",s)d+="runDestructors(destructors);\n";else for(l=o?1:2;l<t.length;++l){var y=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==t[l].destructorFunction&&(d+=y+"_dtor("+y+"); // "+t[l].name+"\n",m.push(y+"_dtor"),p.push(t[l].destructorFunction))}return u&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),d+="}\n",d+="return Asyncify.currData ? Asyncify.whenDone().then(onDone) : onDone("+(u?"rv":"")+");\n",d+="}\n",m.push(d),lt(Function,m).apply(null,p)}function ht(e,t){for(var r=[],n=0;n<e;n++)r.push(E[t+4*n>>2]);return r}function mt(e,t,r){return e instanceof Object||ge(r+' with invalid "this": '+e),e instanceof t.registeredClass.constructor||ge(r+' incompatible with "this" of type '+e.constructor.name),e.$$.ptr||ge("cannot call emscripten binding method "+r+" on deleted object"),qe(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)}var pt=[],yt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function vt(e){e>4&&0==--yt[e].refcount&&(yt[e]=void 0,pt.push(e))}function wt(){for(var e=0,t=5;t<yt.length;++t)void 0!==yt[t]&&++e;return e}function gt(){for(var e=5;e<yt.length;++e)if(void 0!==yt[e])return yt[e];return null}var _t={toValue:e=>(e||ge("Cannot use deleted val. handle = "+e),yt[e].value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=pt.length?pt.pop():yt.length;return yt[t]={refcount:1,value:e},t}}};function bt(e,t,r){switch(t){case 0:return function(e){var t=r?v:w;return this.fromWireType(t[e])};case 1:return function(e){var t=r?g:_;return this.fromWireType(t[e>>1])};case 2:return function(e){var t=r?b:E;return this.fromWireType(t[e>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function Et(e,t){var r=se[e];return void 0===r&&ge(t+" has unknown type "+it(e)),r}function Ct(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function xt(e,t){switch(t){case 2:return function(e){return this.fromWireType(C[e>>2])};case 3:return function(e){return this.fromWireType(x[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Pt(e,t,r){switch(t){case 0:return r?function(e){return v[e]}:function(e){return w[e]};case 1:return r?function(e){return g[e>>1]}:function(e){return _[e>>1]};case 2:return r?function(e){return b[e>>2]}:function(e){return E[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var Tt="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function kt(e,t){for(var r=e,n=r>>1,a=n+t/2;!(n>=a)&&_[n];)++n;if((r=n<<1)-e>32&&Tt)return Tt.decode(w.subarray(e,r));for(var i="",o=0;!(o>=t/2);++o){var s=g[e+2*o>>1];if(0==s)break;i+=String.fromCharCode(s)}return i}function At(e,t,r){if(void 0===r&&(r=2147483647),r<2)return 0;for(var n=t,a=(r-=2)<2*e.length?r/2:e.length,i=0;i<a;++i){var o=e.charCodeAt(i);g[t>>1]=o,t+=2}return g[t>>1]=0,t-n}function It(e){return 2*e.length}function St(e,t){for(var r=0,n="";!(r>=t/4);){var a=b[e+4*r>>2];if(0==a)break;if(++r,a>=65536){var i=a-65536;n+=String.fromCharCode(55296|i>>10,56320|1023&i)}else n+=String.fromCharCode(a)}return n}function Dt(e,t,r){if(void 0===r&&(r=2147483647),r<4)return 0;for(var n=t,a=n+r-4,i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++i)),b[t>>2]=o,(t+=4)+4>a)break}return b[t>>2]=0,t-n}function Lt(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t}function Ft(e,t){for(var r=new Array(e),n=0;n<e;++n)r[n]=Et(E[t+4*n>>2],"parameter "+n);return r}var Mt={};function Rt(e){var t=Mt[e];return void 0===t?ve(e):t}var Bt=[];function jt(){return"object"==typeof globalThis?globalThis:Function("return this")()}var Ot,Gt=[],Nt={},$t={inEventHandler:0,removeAllEventListeners:function(){for(var e=$t.eventHandlers.length-1;e>=0;--e)$t._removeHandler(e);$t.eventHandlers=[],$t.deferredCalls=[]},registerRemoveEventListeners:function(){$t.removeEventListenersRegistered||($t.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,r){function n(e,t){if(e.length!=t.length)return!1;for(var r in e)if(e[r]!=t[r])return!1;return!0}for(var a in $t.deferredCalls){var i=$t.deferredCalls[a];if(i.targetFunction==e&&n(i.argsList,r))return}$t.deferredCalls.push({targetFunction:e,precedence:t,argsList:r}),$t.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<$t.deferredCalls.length;++t)$t.deferredCalls[t].targetFunction==e&&($t.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return $t.inEventHandler&&$t.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if($t.canPerformEventHandlerRequests())for(var e=0;e<$t.deferredCalls.length;++e){var t=$t.deferredCalls[e];$t.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var r=0;r<$t.eventHandlers.length;++r)$t.eventHandlers[r].target!=e||t&&t!=$t.eventHandlers[r].eventTypeString||$t._removeHandler(r--)},_removeHandler:function(e){var t=$t.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),$t.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++$t.inEventHandler,$t.currentEventHandler=e,$t.runDeferredCalls(),e.handlerFunc(t),$t.runDeferredCalls(),--$t.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),$t.eventHandlers.push(e),$t.registerRemoveEventListeners();else for(var r=0;r<$t.eventHandlers.length;++r)$t.eventHandlers[r].target==e.target&&$t.eventHandlers[r].eventTypeString==e.eventTypeString&&$t._removeHandler(r--)},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},Ut=[0,document,window];function Ht(e){var t;return e=(t=e)>2?k(t):t,Ut[e]||document.querySelector(e)}function Vt(e){return Ht(e)}Ot=()=>performance.now();var Wt={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],samplers:[],transformFeedbacks:[],syncs:[],stringCache:{},stringiCache:{},unpackAlignment:4,recordError:function(e){Wt.lastError||(Wt.lastError=e)},getNewId:function(e){for(var t=Wt.counter++,r=e.length;r<t;r++)e[r]=null;return t},getSource:function(e,t,r,n){for(var a="",i=0;i<t;++i){var o=n?b[n+4*i>>2]:-1;a+=k(b[r+4*i>>2],o<0?void 0:o)}return a},createContext:function(e,t){if(!e.getContextSafariWebGL2Fixed){let t=function(t,r){var n=e.getContextSafariWebGL2Fixed(t,r);return"webgl"==t==n instanceof WebGLRenderingContext?n:null};e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=t}var r=t.majorVersion>1?e.getContext("webgl2",t):e.getContext("webgl",t);return r?Wt.registerContext(r,t):0},registerContext:function(e,t){var r=Wt.getNewId(Wt.contexts),n={handle:r,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=n),Wt.contexts[r]=n,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&Wt.initExtensions(n),r},makeContextCurrent:function(e){return Wt.currentContext=Wt.contexts[e],n.ctx=nr=Wt.currentContext&&Wt.currentContext.GLctx,!(e&&!nr)},getContext:function(e){return Wt.contexts[e]},deleteContext:function(e){Wt.currentContext===Wt.contexts[e]&&(Wt.currentContext=null),"object"==typeof $t&&$t.removeAllHandlersOnTarget(Wt.contexts[e].GLctx.canvas),Wt.contexts[e]&&Wt.contexts[e].GLctx.canvas&&(Wt.contexts[e].GLctx.canvas.GLctxObject=void 0),Wt.contexts[e]=null},initExtensions:function(e){if(e||(e=Wt.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t,r=e.GLctx;!function(e){var t=e.getExtension("ANGLE_instanced_arrays");t&&(e.vertexAttribDivisor=function(e,r){t.vertexAttribDivisorANGLE(e,r)},e.drawArraysInstanced=function(e,r,n,a){t.drawArraysInstancedANGLE(e,r,n,a)},e.drawElementsInstanced=function(e,r,n,a,i){t.drawElementsInstancedANGLE(e,r,n,a,i)})}(r),function(e){var t=e.getExtension("OES_vertex_array_object");t&&(e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)})}(r),function(e){var t=e.getExtension("WEBGL_draw_buffers");t&&(e.drawBuffers=function(e,r){t.drawBuffersWEBGL(e,r)})}(r),(t=r).dibvbi=t.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"),function(e){e.mdibvbi=e.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance")}(r),e.version>=2&&(r.disjointTimerQueryExt=r.getExtension("EXT_disjoint_timer_query_webgl2")),(e.version<2||!r.disjointTimerQueryExt)&&(r.disjointTimerQueryExt=r.getExtension("EXT_disjoint_timer_query")),function(e){e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw")}(r),(r.getSupportedExtensions()||[]).forEach((function(e){e.includes("lose_context")||e.includes("debug")||r.getExtension(e)}))}}};function zt(e,t,r,n){for(var a=0;a<e;a++){var i=nr[r](),o=i&&Wt.getNewId(n);i?(i.name=o,n[o]=i):Wt.recordError(1282),b[t+4*a>>2]=o}}function qt(e,t,r){if(t){var n,a,i=void 0;switch(e){case 36346:i=1;break;case 36344:return void(0!=r&&1!=r&&Wt.recordError(1280));case 34814:case 36345:i=0;break;case 34466:var o=nr.getParameter(34467);i=o?o.length:0;break;case 33309:if(Wt.currentContext.version<2)return void Wt.recordError(1282);i=2*(nr.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(Wt.currentContext.version<2)return void Wt.recordError(1280);i=33307==e?3:0}if(void 0===i){var s=nr.getParameter(e);switch(typeof s){case"number":i=s;break;case"boolean":i=s?1:0;break;case"string":return void Wt.recordError(1280);case"object":if(null===s)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:i=0;break;default:return void Wt.recordError(1280)}else{if(s instanceof Float32Array||s instanceof Uint32Array||s instanceof Int32Array||s instanceof Array){for(var l=0;l<s.length;++l)switch(r){case 0:b[t+4*l>>2]=s[l];break;case 2:C[t+4*l>>2]=s[l];break;case 4:v[t+l>>0]=s[l]?1:0}return}try{i=0|s.name}catch(t){return Wt.recordError(1280),void d("GL_INVALID_ENUM in glGet"+r+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+t+")")}}break;default:return Wt.recordError(1280),void d("GL_INVALID_ENUM in glGet"+r+"v: Native code calling glGet"+r+"v("+e+") and it returns "+s+" of type "+typeof s+"!")}}switch(r){case 1:a=i,E[(n=t)>>2]=a,E[n+4>>2]=(a-E[n>>2])/4294967296;break;case 0:b[t>>2]=i;break;case 2:C[t>>2]=i;break;case 4:v[t>>0]=i?1:0}}else Wt.recordError(1281)}function Xt(e){var t=S(e)+1,r=pr(t);return I(e,r,t),r}function Jt(e){return"]"==e.slice(-1)&&e.lastIndexOf("[")}function Kt(e){return 0==(e-=5120)?v:1==e?w:2==e?g:4==e?b:6==e?C:5==e||28922==e||28520==e||30779==e||30782==e?E:_}function Qt(e){return 31-Math.clz32(e.BYTES_PER_ELEMENT)}function Yt(e,t,r,n,a,i){var o=Kt(e),s=Qt(o),l=1<<s,u=function(e){return{5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[e-6402]||1}(t)*l,c=function(e,t,r,n){var a;return t*(e*r+(a=n)-1&-a)}(r,n,u,Wt.unpackAlignment);return o.subarray(a>>s,a+c>>s)}function Zt(e){var t=nr.currentProgram;if(t){var r=t.uniformLocsById[e];return"number"==typeof r&&(t.uniformLocsById[e]=r=nr.getUniformLocation(t,t.uniformArrayNamesById[e]+(r>0?"["+r+"]":""))),r}Wt.recordError(1282)}var er=[],tr=[];function rr(e){try{return c.grow(e-y.byteLength+65535>>>16),D(c.buffer),1}catch(e){}}var nr,ar=["default","low-power","high-performance"],ir=function(e,t){var r=t>>2,n=b[r+6],a={alpha:!!b[r+0],depth:!!b[r+1],stencil:!!b[r+2],antialias:!!b[r+3],premultipliedAlpha:!!b[r+4],preserveDrawingBuffer:!!b[r+5],powerPreference:ar[n],failIfMajorPerformanceCaveat:!!b[r+7],majorVersion:b[r+8],minorVersion:b[r+9],enableExtensionsByDefault:b[r+10],explicitSwapControl:b[r+11],proxyContextToMainThread:b[r+12],renderViaOffscreenBackBuffer:b[r+13]},i=Vt(e);return i?a.explicitSwapControl?0:Wt.createContext(i,a):0},or=function(){return Wt.currentContext?Wt.currentContext.handle:0},sr=function(e,t,r,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=te.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n},lr=365,ur=146;Object.defineProperties(sr.prototype,{read:{get:function(){return(this.mode&lr)===lr},set:function(e){e?this.mode|=lr:this.mode&=-366}},write:{get:function(){return(this.mode&ur)===ur},set:function(e){e?this.mode|=ur:this.mode&=-147}},isFolder:{get:function(){return te.isDir(this.mode)}},isDevice:{get:function(){return te.isChrdev(this.mode)}}}),te.FSNode=sr,te.staticInit(),de=n.InternalError=fe(Error,"InternalError"),function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);ye=e}(),we=n.BindingError=fe(Error,"BindingError"),He.prototype.isAliasOf=be,He.prototype.clone=Ge,He.prototype.delete=Ne,He.prototype.isDeleted=$e,He.prototype.deleteLater=Ue,n.getInheritedInstanceCount=Ae,n.getLiveInheritedInstances=Ie,n.flushPendingDeletes=De,n.setDelayFunction=Fe,et.prototype.getPointee=Qe,et.prototype.destructor=Ye,et.prototype.argPackAdvance=8,et.prototype.readValueFromPointer=ie,et.prototype.deleteObject=Ze,et.prototype.fromWireType=je,at=n.UnboundTypeError=fe(Error,"UnboundTypeError"),n.count_emval_handles=wt,n.get_first_emval=gt;for(var cr=new Float32Array(288),fr=0;fr<288;++fr)er[fr]=cr.subarray(0,fr+1);var dr=new Int32Array(288);for(fr=0;fr<288;++fr)tr[fr]=dr.subarray(0,fr+1);var hr={d:function(e,t,r,n){H("Assertion failed: "+k(e)+", at: "+[t?k(t):"unknown filename",r,n?k(n):"unknown function"])},A:function(e){return pr(e+24)+24},z:function(e,t,r){throw new X(e).init(t,r),e},G:function(e,t,r){re.varargs=r;try{var n=re.getStreamFromFD(e);switch(t){case 0:return(a=re.get())<0?-28:te.createStream(n,a).fd;case 1:case 2:case 6:case 7:return 0;case 3:return n.flags;case 4:var a=re.get();return n.flags|=a,0;case 5:return a=re.get(),g[a+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return i=28,b[vr()>>2]=i,-1}}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}var i},hb:function(e,t,r){re.varargs=r;try{var n=re.getStreamFromFD(e);switch(t){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return n.tty?0:-59;case 21519:if(!n.tty)return-59;var a=re.get();return b[a>>2]=0,0;case 21520:return n.tty?-28:-59;case 21531:return a=re.get(),te.ioctl(n,t,a);default:return-28}}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},ib:function(e,t,r,n){re.varargs=n;try{t=re.getStr(t),t=re.calculateAt(e,t);var a=n?re.get():0;return te.open(t,r,a).fd}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return-e.errno}},o:function(e){var t=ne[e];delete ne[e];var r=t.rawConstructor,n=t.rawDestructor,a=t.fields;me([e],a.map((e=>e.getterReturnType)).concat(a.map((e=>e.setterArgumentType))),(e=>{var i={};return a.forEach(((t,r)=>{var n=t.fieldName,o=e[r],s=t.getter,l=t.getterContext,u=e[r+a.length],c=t.setter,f=t.setterContext;i[n]={read:e=>o.fromWireType(s(l,e)),write:(e,t)=>{var r=[];c(f,e,u.toWireType(r,t)),ae(r)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var r in i)t[r]=i[r].read(e);return n(e),t},toWireType:function(e,t){for(var a in i)if(!(a in t))throw new TypeError('Missing field:  "'+a+'"');var o=r();for(a in i)i[a].write(o,t[a]);return null!==e&&e.push(n,o),o},argPackAdvance:8,readValueFromPointer:ie,destructorFunction:n}]}))},cb:function(e,t,r,n,a){},kb:function(e,t,r,n,a){var i=pe(r);_e(e,{name:t=ve(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:a},argPackAdvance:8,readValueFromPointer:function(e){var n;if(1===r)n=v;else if(2===r)n=g;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);n=b}return this.fromWireType(n[e>>i])},destructorFunction:null})},f:function(e,t,r,n,a,i,o,s,l,u,c,f,d){c=ve(c),i=nt(a,i),s&&(s=nt(o,s)),u&&(u=nt(l,u)),d=nt(f,d);var h=ue(c);We(h,(function(){st("Cannot construct "+c+" due to unbound types",[n])})),me([e,t,r],n?[n]:[],(function(t){var r,a;t=t[0],a=n?(r=t.registeredClass).instancePrototype:He.prototype;var o=ce(h,(function(){if(Object.getPrototypeOf(this)!==l)throw new we("Use 'new' to construct "+c);if(void 0===f.constructor_body)throw new we(c+" has no accessible constructor");var e=f.constructor_body[arguments.length];if(void 0===e)throw new we("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(f.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),l=Object.create(a,{constructor:{value:o}});o.prototype=l;var f=new ze(c,o,l,d,r,i,s,u),m=new et(c,f,!0,!1,!1),p=new et(c+"*",f,!1,!1,!1),y=new et(c+" const*",f,!1,!0,!1);return ke[e]={pointerType:p,constPointerType:y},tt(h,o),[m,p,y]}))},e:function(e,t,r,n,a,i,o){var s=ht(r,n);t=ve(t),i=nt(a,i),me([],[e],(function(e){var n=(e=e[0]).name+"."+t;function a(){st("Cannot call "+n+" due to unbound types",s)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var l=e.registeredClass.constructor;return void 0===l[t]?(a.argCount=r-1,l[t]=a):(Ve(l,t,n),l[t].overloadTable[r-1]=a),me([],s,(function(e){var a=[e[0],null].concat(e.slice(1)),s=dt(n,a,null,i,o);return void 0===l[t].overloadTable?(s.argCount=r-1,l[t]=s):l[t].overloadTable[r-1]=s,[]})),[]}))},q:function(e,t,r,n,a,i){p(t>0);var o=ht(t,r);a=nt(n,a),me([],[e],(function(e){var r="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new we("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=()=>{st("Cannot construct "+e.name+" due to unbound types",o)},me([],o,(function(n){return n.splice(1,0,null),e.registeredClass.constructor_body[t-1]=dt(r,n,null,a,i),[]})),[]}))},a:function(e,t,r,n,a,i,o,s){var l=ht(r,n);t=ve(t),i=nt(a,i),me([],[e],(function(e){var n=(e=e[0]).name+"."+t;function a(){st("Cannot call "+n+" due to unbound types",l)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&e.registeredClass.pureVirtualFunctions.push(t);var u=e.registeredClass.instancePrototype,c=u[t];return void 0===c||void 0===c.overloadTable&&c.className!==e.name&&c.argCount===r-2?(a.argCount=r-2,a.className=e.name,u[t]=a):(Ve(u,t,n),u[t].overloadTable[r-2]=a),me([],l,(function(a){var s=dt(n,a,e,i,o);return void 0===u[t].overloadTable?(s.argCount=r-2,u[t]=s):u[t].overloadTable[r-2]=s,[]})),[]}))},b:function(e,t,r,n,a,i,o,s,l,u){t=ve(t),a=nt(n,a),me([],[e],(function(e){var n=(e=e[0]).name+"."+t,c={get:function(){st("Cannot access "+n+" due to unbound types",[r,o])},enumerable:!0,configurable:!0};return c.set=l?()=>{st("Cannot access "+n+" due to unbound types",[r,o])}:e=>{ge(n+" is a read-only property")},Object.defineProperty(e.registeredClass.instancePrototype,t,c),me([],l?[r,o]:[r],(function(r){var o=r[0],c={get:function(){var t=mt(this,e,n+" getter");return o.fromWireType(a(i,t))},enumerable:!0};if(l){l=nt(s,l);var f=r[1];c.set=function(t){var r=mt(this,e,n+" setter"),a=[];l(u,r,f.toWireType(a,t)),ae(a)}}return Object.defineProperty(e.registeredClass.instancePrototype,t,c),[]})),[]}))},jb:function(e,t){_e(e,{name:t=ve(t),fromWireType:function(e){var t=_t.toValue(e);return vt(e),t},toWireType:function(e,t){return _t.toHandle(t)},argPackAdvance:8,readValueFromPointer:ie,destructorFunction:null})},w:function(e,t,r,n){var a=pe(r);function i(){}t=ve(t),i.values={},_e(e,{name:t,constructor:i,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:bt(t,a,n),destructorFunction:null}),We(t,i)},ab:function(e,t,r){var n=Et(e,"enum");t=ve(t);var a=n.constructor,i=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:ce(n.name+"_"+t,(function(){}))}});a.values[r]=i,a[t]=i},I:function(e,t,r){var n=pe(r);_e(e,{name:t=ve(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:xt(t,n),destructorFunction:null})},C:function(e,t,r,n,a,i){var o=ht(t,r);e=ve(e),a=nt(n,a),We(e,(function(){st("Cannot call "+e+" due to unbound types",o)}),t-1),me([],o,(function(r){var n=[r[0],null].concat(r.slice(1));return tt(e,dt(e,n,null,a,i),t-1),[]}))},m:function(e,t,r,n,a){t=ve(t);var i=pe(r),o=e=>e;if(0===n){var s=32-8*r;o=e=>e<<s>>>s}var l=t.includes("unsigned");_e(e,{name:t,fromWireType:o,toWireType:l?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:8,readValueFromPointer:Pt(t,i,0!==n),destructorFunction:null})},g:function(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function a(e){var t=E,r=t[e>>=2],a=t[e+1];return new n(y,a,r)}_e(e,{name:r=ve(r),fromWireType:a,argPackAdvance:8,readValueFromPointer:a},{ignoreDuplicateRegistrations:!0})},j:function(e,t,r,n,a,i,o,s,l,u,c,f){r=ve(r),i=nt(a,i),s=nt(o,s),u=nt(l,u),f=nt(c,f),me([e],[t],(function(e){return e=e[0],[new et(r,e.registeredClass,!1,!1,!0,e,n,i,s,u,f)]}))},H:function(e,t){var r="std::string"===(t=ve(t));_e(e,{name:t,fromWireType:function(e){var t,n=E[e>>2],a=e+4;if(r)for(var i=a,o=0;o<=n;++o){var s=a+o;if(o==n||0==w[s]){var l=k(i,s-i);void 0===t?t=l:(t+=String.fromCharCode(0),t+=l),i=s+1}}else{var u=new Array(n);for(o=0;o<n;++o)u[o]=String.fromCharCode(w[a+o]);t=u.join("")}return mr(e),t},toWireType:function(e,t){var n;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var a="string"==typeof t;a||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||ge("Cannot pass non-string to std::string"),n=r&&a?S(t):t.length;var i=pr(4+n+1),o=i+4;if(E[i>>2]=n,r&&a)I(t,o,n+1);else if(a)for(var s=0;s<n;++s){var l=t.charCodeAt(s);l>255&&(mr(o),ge("String has UTF-16 code units that do not fit in 8 bits")),w[o+s]=l}else for(s=0;s<n;++s)w[o+s]=t[s];return null!==e&&e.push(mr,i),i},argPackAdvance:8,readValueFromPointer:ie,destructorFunction:function(e){mr(e)}})},y:function(e,t,r){var n,a,i,o,s;r=ve(r),2===t?(n=kt,a=At,o=It,i=()=>_,s=1):4===t&&(n=St,a=Dt,o=Lt,i=()=>E,s=2),_e(e,{name:r,fromWireType:function(e){for(var r,a=E[e>>2],o=i(),l=e+4,u=0;u<=a;++u){var c=e+4+u*t;if(u==a||0==o[c>>s]){var f=n(l,c-l);void 0===r?r=f:(r+=String.fromCharCode(0),r+=f),l=c+t}}return mr(e),r},toWireType:function(e,n){"string"!=typeof n&&ge("Cannot pass non-string to C++ string type "+r);var i=o(n),l=pr(4+i+t);return E[l>>2]=i>>s,a(n,l+4,i+t),null!==e&&e.push(mr,l),l},argPackAdvance:8,readValueFromPointer:ie,destructorFunction:function(e){mr(e)}})},p:function(e,t,r,n,a,i){ne[e]={name:ve(t),rawConstructor:nt(r,n),rawDestructor:nt(a,i),fields:[]}},x:function(e,t,r,n,a,i,o,s,l,u){ne[e].fields.push({fieldName:ve(t),getterReturnType:r,getter:nt(n,a),getterContext:i,setterArgumentType:o,setter:nt(s,l),setterContext:u})},lb:function(e,t){_e(e,{isVoid:!0,name:t=ve(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},db:function(){return!0},v:function(e,t,r){e=_t.toValue(e),t=Et(t,"emval::as");var n=[],a=_t.toHandle(n);return E[r>>2]=a,t.toWireType(n,e)},Ha:function(e){return ft.handleAsync((()=>(e=_t.toValue(e)).then(_t.toHandle)))},Db:function(e,t,r,n){e=_t.toValue(e);for(var a=Ft(t,r),i=new Array(t),o=0;o<t;++o){var s=a[o];i[o]=s.readValueFromPointer(n),n+=s.argPackAdvance}var l=e.apply(void 0,i);return _t.toHandle(l)},h:function(e,t,r,n,a){return(e=Bt[e])(t=_t.toValue(t),r=Rt(r),function(e){var t=[];return E[e>>2]=_t.toHandle(t),t}(n),a)},k:function(e,t,r,n){(e=Bt[e])(t=_t.toValue(t),r=Rt(r),null,n)},u:vt,nb:function(e){return 0===e?_t.toHandle(jt()):(e=Rt(e),_t.toHandle(jt()[e]))},c:function(e,t){var r=Ft(e,t),n=r[0],a=n.name+"_$"+r.slice(1).map((function(e){return e.name})).join("_")+"$",i=Gt[a];if(void 0!==i)return i;for(var o=["retType"],s=[n],l="",u=0;u<e-1;++u)l+=(0!==u?", ":"")+"arg"+u,o.push("argType"+u),s.push(r[1+u]);var c="return function "+ue("methodCaller_"+a)+"(handle, name, destructors, args) {\n",f=0;for(u=0;u<e-1;++u)c+="    var arg"+u+" = argType"+u+".readValueFromPointer(args"+(f?"+"+f:"")+");\n",f+=r[u+1].argPackAdvance;for(c+="    var rv = handle[name]("+l+");\n",u=0;u<e-1;++u)r[u+1].deleteObject&&(c+="    argType"+u+".deleteObject(arg"+u+");\n");n.isVoid||(c+="    return retType.toWireType(destructors, rv);\n"),c+="};\n",o.push(c);var d,h,m=lt(Function,o).apply(null,s);return d=m,h=Bt.length,Bt.push(d),i=h,Gt[a]=i,i},Za:function(e){return e=Rt(e),_t.toHandle(n[e])},J:function(e,t){return e=_t.toValue(e),t=_t.toValue(t),_t.toHandle(e[t])},t:function(e){e>4&&(yt[e].refcount+=1)},mb:function(e,t){return(e=_t.toValue(e))instanceof(t=_t.toValue(t))},Xa:function(e,t,r,a){e=_t.toValue(e);var i=Nt[t];return i||(i=function(e){for(var t="",r=0;r<e;++r)t+=(0!==r?", ":"")+"arg"+r;var a="return function emval_allocator_"+e+"(constructor, argTypes, args) {\n  var HEAPU32 = getMemory();\n";for(r=0;r<e;++r)a+="var argType"+r+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+r+"');\nvar arg"+r+" = argType"+r+".readValueFromPointer(args);\nargs += argType"+r+"['argPackAdvance'];\nargTypes += 4;\n";return a+="var obj = new constructor("+t+");\nreturn valueToHandle(obj);\n}\n",new Function("requireRegisteredType","Module","valueToHandle","getMemory",a)(Et,n,_t.toHandle,(()=>E))}(t),Nt[t]=i),i(e,r,a)},$a:function(){return _t.toHandle([])},Ya:function(e){return _t.toHandle(Rt(e))},_a:function(){return _t.toHandle({})},U:function(e){ae(_t.toValue(e)),vt(e)},s:function(e,t,r){e=_t.toValue(e),t=_t.toValue(t),r=_t.toValue(r),e[t]=r},l:function(e,t){var r=(e=Et(e,"_emval_take_value")).readValueFromPointer(t);return _t.toHandle(r)},r:function(){H("")},D:function(e,t,r){var n=Vt(e);if(!n)return-4;b[t>>2]=n.width,b[r>>2]=n.height},fb:Ot,Ua:function(e){nr.activeTexture(e)},Ta:function(e,t){nr.attachShader(Wt.programs[e],Wt.shaders[t])},Ra:function(e,t,r){nr.bindAttribLocation(Wt.programs[e],t,k(r))},Qa:function(e,t){35051==e?nr.currentPixelPackBufferBinding=t:35052==e&&(nr.currentPixelUnpackBufferBinding=t),nr.bindBuffer(e,Wt.buffers[t])},Pa:function(e,t){nr.bindFramebuffer(e,Wt.framebuffers[t])},Oa:function(e,t){nr.bindRenderbuffer(e,Wt.renderbuffers[t])},Na:function(e,t){nr.bindTexture(e,Wt.textures[t])},yb:function(e){nr.bindVertexArray(Wt.vaos[e])},vb:function(e){nr.bindVertexArray(Wt.vaos[e])},Ma:function(e,t,r,n){nr.blendColor(e,t,r,n)},La:function(e){nr.blendEquation(e)},zb:function(e,t){nr.blendEquationSeparate(e,t)},Ka:function(e,t){nr.blendFunc(e,t)},qb:function(e,t,r,n,a,i,o,s,l,u){nr.blitFramebuffer(e,t,r,n,a,i,o,s,l,u)},Ja:function(e,t,r,n){Wt.currentContext.version>=2?r&&t?nr.bufferData(e,w,n,r,t):nr.bufferData(e,t,n):nr.bufferData(e,r?w.subarray(r,r+t):t,n)},Ia:function(e){return nr.checkFramebufferStatus(e)},Ga:function(e){nr.clear(e)},Fa:function(e,t,r,n){nr.clearColor(e,t,r,n)},Ea:function(e){nr.clearStencil(e)},Da:function(e,t,r,n){nr.colorMask(!!e,!!t,!!r,!!n)},Ca:function(e){nr.compileShader(Wt.shaders[e])},Ba:function(e,t,r,n,a,i,o,s){nr.copyTexSubImage2D(e,t,r,n,a,i,o,s)},Aa:function(){var e=Wt.getNewId(Wt.programs),t=nr.createProgram();return t.name=e,t.maxUniformLength=t.maxAttributeLength=t.maxUniformBlockNameLength=0,t.uniformIdCounter=1,Wt.programs[e]=t,e},za:function(e){var t=Wt.getNewId(Wt.shaders);return Wt.shaders[t]=nr.createShader(e),t},ya:function(e,t){for(var r=0;r<e;r++){var n=b[t+4*r>>2],a=Wt.buffers[n];a&&(nr.deleteBuffer(a),a.name=0,Wt.buffers[n]=null,n==nr.currentPixelPackBufferBinding&&(nr.currentPixelPackBufferBinding=0),n==nr.currentPixelUnpackBufferBinding&&(nr.currentPixelUnpackBufferBinding=0))}},xa:function(e,t){for(var r=0;r<e;++r){var n=b[t+4*r>>2],a=Wt.framebuffers[n];a&&(nr.deleteFramebuffer(a),a.name=0,Wt.framebuffers[n]=null)}},wa:function(e){if(e){var t=Wt.programs[e];t?(nr.deleteProgram(t),t.name=0,Wt.programs[e]=null):Wt.recordError(1281)}},va:function(e,t){for(var r=0;r<e;r++){var n=b[t+4*r>>2],a=Wt.renderbuffers[n];a&&(nr.deleteRenderbuffer(a),a.name=0,Wt.renderbuffers[n]=null)}},ua:function(e){if(e){var t=Wt.shaders[e];t?(nr.deleteShader(t),Wt.shaders[e]=null):Wt.recordError(1281)}},rb:function(e){if(e){var t=Wt.syncs[e];t?(nr.deleteSync(t),t.name=0,Wt.syncs[e]=null):Wt.recordError(1281)}},ta:function(e,t){for(var r=0;r<e;r++){var n=b[t+4*r>>2],a=Wt.textures[n];a&&(nr.deleteTexture(a),a.name=0,Wt.textures[n]=null)}},xb:function(e,t){for(var r=0;r<e;r++){var n=b[t+4*r>>2];nr.deleteVertexArray(Wt.vaos[n]),Wt.vaos[n]=null}},ub:function(e,t){for(var r=0;r<e;r++){var n=b[t+4*r>>2];nr.deleteVertexArray(Wt.vaos[n]),Wt.vaos[n]=null}},sa:function(e){nr.depthMask(!!e)},ra:function(e){nr.disable(e)},qa:function(e){nr.disableVertexAttribArray(e)},pa:function(e,t,r){nr.drawArrays(e,t,r)},oa:function(e,t,r,n){nr.drawElements(e,t,r,n)},na:function(e){nr.enable(e)},ma:function(e){nr.enableVertexAttribArray(e)},sb:function(e,t){var r=nr.fenceSync(e,t);if(r){var n=Wt.getNewId(Wt.syncs);return r.name=n,Wt.syncs[n]=r,n}return 0},la:function(){nr.finish()},ka:function(){nr.flush()},ja:function(e,t,r,n){nr.framebufferRenderbuffer(e,t,r,Wt.renderbuffers[n])},ia:function(e,t,r,n,a){nr.framebufferTexture2D(e,t,r,Wt.textures[n],a)},ha:function(e,t){zt(e,t,"createBuffer",Wt.buffers)},ga:function(e,t){zt(e,t,"createFramebuffer",Wt.framebuffers)},fa:function(e,t){zt(e,t,"createRenderbuffer",Wt.renderbuffers)},ea:function(e,t){zt(e,t,"createTexture",Wt.textures)},wb:function(e,t){zt(e,t,"createVertexArray",Wt.vaos)},tb:function(e,t){zt(e,t,"createVertexArray",Wt.vaos)},Ab:function(e,t){return nr.getAttribLocation(Wt.programs[e],k(t))},da:function(e,t,r){r?b[r>>2]=nr.getBufferParameter(e,t):Wt.recordError(1281)},ca:function(){var e=nr.getError()||Wt.lastError;return Wt.lastError=0,e},ba:function(e,t,r,n){var a=nr.getFramebufferAttachmentParameter(e,t,r);(a instanceof WebGLRenderbuffer||a instanceof WebGLTexture)&&(a=0|a.name),b[n>>2]=a},aa:function(e,t){qt(e,t,0)},$:function(e,t,r,n){var a=nr.getProgramInfoLog(Wt.programs[e]);null===a&&(a="(unknown error)");var i=t>0&&n?I(a,n,t):0;r&&(b[r>>2]=i)},_:function(e,t,r){if(r)if(e>=Wt.counter)Wt.recordError(1281);else if(e=Wt.programs[e],35716==t){var n=nr.getProgramInfoLog(e);null===n&&(n="(unknown error)"),b[r>>2]=n.length+1}else if(35719==t){if(!e.maxUniformLength)for(var a=0;a<nr.getProgramParameter(e,35718);++a)e.maxUniformLength=Math.max(e.maxUniformLength,nr.getActiveUniform(e,a).name.length+1);b[r>>2]=e.maxUniformLength}else if(35722==t){if(!e.maxAttributeLength)for(a=0;a<nr.getProgramParameter(e,35721);++a)e.maxAttributeLength=Math.max(e.maxAttributeLength,nr.getActiveAttrib(e,a).name.length+1);b[r>>2]=e.maxAttributeLength}else if(35381==t){if(!e.maxUniformBlockNameLength)for(a=0;a<nr.getProgramParameter(e,35382);++a)e.maxUniformBlockNameLength=Math.max(e.maxUniformBlockNameLength,nr.getActiveUniformBlockName(e,a).length+1);b[r>>2]=e.maxUniformBlockNameLength}else b[r>>2]=nr.getProgramParameter(e,t);else Wt.recordError(1281)},Z:function(e,t,r){r?b[r>>2]=nr.getRenderbufferParameter(e,t):Wt.recordError(1281)},Y:function(e,t,r,n){var a=nr.getShaderInfoLog(Wt.shaders[e]);null===a&&(a="(unknown error)");var i=t>0&&n?I(a,n,t):0;r&&(b[r>>2]=i)},X:function(e,t,r,n){var a=nr.getShaderPrecisionFormat(e,t);b[r>>2]=a.rangeMin,b[r+4>>2]=a.rangeMax,b[n>>2]=a.precision},W:function(e,t,r){if(r)if(35716==t){var n=nr.getShaderInfoLog(Wt.shaders[e]);null===n&&(n="(unknown error)");var a=n?n.length+1:0;b[r>>2]=a}else if(35720==t){var i=nr.getShaderSource(Wt.shaders[e]),o=i?i.length+1:0;b[r>>2]=o}else b[r>>2]=nr.getShaderParameter(Wt.shaders[e],t);else Wt.recordError(1281)},V:function(e){var t=Wt.stringCache[e];if(!t){switch(e){case 7939:var r=nr.getSupportedExtensions()||[];t=Xt((r=r.concat(r.map((function(e){return"GL_"+e})))).join(" "));break;case 7936:case 7937:case 37445:case 37446:var n=nr.getParameter(e);n||Wt.recordError(1280),t=n&&Xt(n);break;case 7938:var a=nr.getParameter(7938);t=Xt(a=Wt.currentContext.version>=2?"OpenGL ES 3.0 ("+a+")":"OpenGL ES 2.0 ("+a+")");break;case 35724:var i=nr.getParameter(35724),o=i.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==o&&(3==o[1].length&&(o[1]=o[1]+"0"),i="OpenGL ES GLSL ES "+o[1]+" ("+i+")"),t=Xt(i);break;default:Wt.recordError(1280)}Wt.stringCache[e]=t}return t},T:function(e,t){if(Wt.currentContext.version<2)return Wt.recordError(1282),0;var r=Wt.stringiCache[e];if(r)return t<0||t>=r.length?(Wt.recordError(1281),0):r[t];if(7939===e){var n=nr.getSupportedExtensions()||[];return n=(n=n.concat(n.map((function(e){return"GL_"+e})))).map((function(e){return Xt(e)})),r=Wt.stringiCache[e]=n,t<0||t>=r.length?(Wt.recordError(1281),0):r[t]}return Wt.recordError(1280),0},S:function(e,t){if(t=k(t),e=Wt.programs[e]){!function(e){var t,r,n=e.uniformLocsById,a=e.uniformSizeAndIdsByName;if(!n)for(e.uniformLocsById=n={},e.uniformArrayNamesById={},t=0;t<nr.getProgramParameter(e,35718);++t){var i=nr.getActiveUniform(e,t),o=i.name,s=i.size,l=Jt(o),u=l>0?o.slice(0,l):o,c=e.uniformIdCounter;for(e.uniformIdCounter+=s,a[u]=[s,c],r=0;r<s;++r)n[c]=r,e.uniformArrayNamesById[c++]=u}}(e);var r=e.uniformLocsById,n=0,a=t,i=Jt(t);i>0&&(s=t.slice(i+1),n=parseInt(s)>>>0,a=t.slice(0,i));var o=e.uniformSizeAndIdsByName[a];if(o&&n<o[0]&&(r[n+=o[1]]=r[n]||nr.getUniformLocation(e,t)))return n}else Wt.recordError(1281);var s;return-1},Sa:function(e){return nr.isEnabled(e)},R:function(e){var t=Wt.textures[e];return t?nr.isTexture(t):0},Q:function(e){nr.lineWidth(e)},P:function(e){e=Wt.programs[e],nr.linkProgram(e),e.uniformLocsById=0,e.uniformSizeAndIdsByName={}},O:function(e,t){3317==e&&(Wt.unpackAlignment=t),nr.pixelStorei(e,t)},N:function(e,t,r,n,a,i,o){if(Wt.currentContext.version>=2)if(nr.currentPixelPackBufferBinding)nr.readPixels(e,t,r,n,a,i,o);else{var s=Kt(i);nr.readPixels(e,t,r,n,a,i,s,o>>Qt(s))}else{var l=Yt(i,a,r,n,o);l?nr.readPixels(e,t,r,n,a,i,l):Wt.recordError(1280)}},M:function(e,t,r,n){nr.renderbufferStorage(e,t,r,n)},pb:function(e,t,r,n,a){nr.renderbufferStorageMultisample(e,t,r,n,a)},L:function(e,t,r,n){nr.scissor(e,t,r,n)},K:function(e,t,r,n){var a=Wt.getSource(e,t,r,n);nr.shaderSource(Wt.shaders[e],a)},fc:function(e,t,r,n,a,i,o,s,l){if(Wt.currentContext.version>=2)if(nr.currentPixelUnpackBufferBinding)nr.texImage2D(e,t,r,n,a,i,o,s,l);else if(l){var u=Kt(s);nr.texImage2D(e,t,r,n,a,i,o,s,u,l>>Qt(u))}else nr.texImage2D(e,t,r,n,a,i,o,s,null);else nr.texImage2D(e,t,r,n,a,i,o,s,l?Yt(s,o,n,a,l):null)},ec:function(e,t,r){nr.texParameterf(e,t,r)},dc:function(e,t,r){var n=C[r>>2];nr.texParameterf(e,t,n)},cc:function(e,t,r){nr.texParameteri(e,t,r)},bc:function(e,t,r){var n=b[r>>2];nr.texParameteri(e,t,n)},ac:function(e,t,r,n,a,i,o,s,l){if(Wt.currentContext.version>=2)if(nr.currentPixelUnpackBufferBinding)nr.texSubImage2D(e,t,r,n,a,i,o,s,l);else if(l){var u=Kt(s);nr.texSubImage2D(e,t,r,n,a,i,o,s,u,l>>Qt(u))}else nr.texSubImage2D(e,t,r,n,a,i,o,s,null);else{var c=null;l&&(c=Yt(s,o,a,i,l)),nr.texSubImage2D(e,t,r,n,a,i,o,s,c)}},$b:function(e,t){nr.uniform1f(Zt(e),t)},_b:function(e,t,r){if(Wt.currentContext.version>=2)t&&nr.uniform1fv(Zt(e),C,r>>2,t);else{if(t<=288)for(var n=er[t-1],a=0;a<t;++a)n[a]=C[r+4*a>>2];else n=C.subarray(r>>2,r+4*t>>2);nr.uniform1fv(Zt(e),n)}},Zb:function(e,t){nr.uniform1i(Zt(e),t)},Yb:function(e,t,r){if(Wt.currentContext.version>=2)t&&nr.uniform1iv(Zt(e),b,r>>2,t);else{if(t<=288)for(var n=tr[t-1],a=0;a<t;++a)n[a]=b[r+4*a>>2];else n=b.subarray(r>>2,r+4*t>>2);nr.uniform1iv(Zt(e),n)}},Xb:function(e,t,r){nr.uniform2f(Zt(e),t,r)},Wb:function(e,t,r){if(Wt.currentContext.version>=2)t&&nr.uniform2fv(Zt(e),C,r>>2,2*t);else{if(t<=144)for(var n=er[2*t-1],a=0;a<2*t;a+=2)n[a]=C[r+4*a>>2],n[a+1]=C[r+(4*a+4)>>2];else n=C.subarray(r>>2,r+8*t>>2);nr.uniform2fv(Zt(e),n)}},Vb:function(e,t,r){nr.uniform2i(Zt(e),t,r)},Ub:function(e,t,r){if(Wt.currentContext.version>=2)t&&nr.uniform2iv(Zt(e),b,r>>2,2*t);else{if(t<=144)for(var n=tr[2*t-1],a=0;a<2*t;a+=2)n[a]=b[r+4*a>>2],n[a+1]=b[r+(4*a+4)>>2];else n=b.subarray(r>>2,r+8*t>>2);nr.uniform2iv(Zt(e),n)}},Tb:function(e,t,r,n){nr.uniform3f(Zt(e),t,r,n)},Sb:function(e,t,r){if(Wt.currentContext.version>=2)t&&nr.uniform3fv(Zt(e),C,r>>2,3*t);else{if(t<=96)for(var n=er[3*t-1],a=0;a<3*t;a+=3)n[a]=C[r+4*a>>2],n[a+1]=C[r+(4*a+4)>>2],n[a+2]=C[r+(4*a+8)>>2];else n=C.subarray(r>>2,r+12*t>>2);nr.uniform3fv(Zt(e),n)}},Rb:function(e,t,r,n){nr.uniform3i(Zt(e),t,r,n)},Qb:function(e,t,r){if(Wt.currentContext.version>=2)t&&nr.uniform3iv(Zt(e),b,r>>2,3*t);else{if(t<=96)for(var n=tr[3*t-1],a=0;a<3*t;a+=3)n[a]=b[r+4*a>>2],n[a+1]=b[r+(4*a+4)>>2],n[a+2]=b[r+(4*a+8)>>2];else n=b.subarray(r>>2,r+12*t>>2);nr.uniform3iv(Zt(e),n)}},Pb:function(e,t,r,n,a){nr.uniform4f(Zt(e),t,r,n,a)},Ob:function(e,t,r){if(Wt.currentContext.version>=2)t&&nr.uniform4fv(Zt(e),C,r>>2,4*t);else{if(t<=72){var n=er[4*t-1],a=C;r>>=2;for(var i=0;i<4*t;i+=4){var o=r+i;n[i]=a[o],n[i+1]=a[o+1],n[i+2]=a[o+2],n[i+3]=a[o+3]}}else n=C.subarray(r>>2,r+16*t>>2);nr.uniform4fv(Zt(e),n)}},Nb:function(e,t,r,n,a){nr.uniform4i(Zt(e),t,r,n,a)},Mb:function(e,t,r){if(Wt.currentContext.version>=2)t&&nr.uniform4iv(Zt(e),b,r>>2,4*t);else{if(t<=72)for(var n=tr[4*t-1],a=0;a<4*t;a+=4)n[a]=b[r+4*a>>2],n[a+1]=b[r+(4*a+4)>>2],n[a+2]=b[r+(4*a+8)>>2],n[a+3]=b[r+(4*a+12)>>2];else n=b.subarray(r>>2,r+16*t>>2);nr.uniform4iv(Zt(e),n)}},Lb:function(e,t,r,n){if(Wt.currentContext.version>=2)t&&nr.uniformMatrix2fv(Zt(e),!!r,C,n>>2,4*t);else{if(t<=72)for(var a=er[4*t-1],i=0;i<4*t;i+=4)a[i]=C[n+4*i>>2],a[i+1]=C[n+(4*i+4)>>2],a[i+2]=C[n+(4*i+8)>>2],a[i+3]=C[n+(4*i+12)>>2];else a=C.subarray(n>>2,n+16*t>>2);nr.uniformMatrix2fv(Zt(e),!!r,a)}},Kb:function(e,t,r,n){if(Wt.currentContext.version>=2)t&&nr.uniformMatrix3fv(Zt(e),!!r,C,n>>2,9*t);else{if(t<=32)for(var a=er[9*t-1],i=0;i<9*t;i+=9)a[i]=C[n+4*i>>2],a[i+1]=C[n+(4*i+4)>>2],a[i+2]=C[n+(4*i+8)>>2],a[i+3]=C[n+(4*i+12)>>2],a[i+4]=C[n+(4*i+16)>>2],a[i+5]=C[n+(4*i+20)>>2],a[i+6]=C[n+(4*i+24)>>2],a[i+7]=C[n+(4*i+28)>>2],a[i+8]=C[n+(4*i+32)>>2];else a=C.subarray(n>>2,n+36*t>>2);nr.uniformMatrix3fv(Zt(e),!!r,a)}},Jb:function(e,t,r,n){if(Wt.currentContext.version>=2)t&&nr.uniformMatrix4fv(Zt(e),!!r,C,n>>2,16*t);else{if(t<=18){var a=er[16*t-1],i=C;n>>=2;for(var o=0;o<16*t;o+=16){var s=n+o;a[o]=i[s],a[o+1]=i[s+1],a[o+2]=i[s+2],a[o+3]=i[s+3],a[o+4]=i[s+4],a[o+5]=i[s+5],a[o+6]=i[s+6],a[o+7]=i[s+7],a[o+8]=i[s+8],a[o+9]=i[s+9],a[o+10]=i[s+10],a[o+11]=i[s+11],a[o+12]=i[s+12],a[o+13]=i[s+13],a[o+14]=i[s+14],a[o+15]=i[s+15]}}else a=C.subarray(n>>2,n+64*t>>2);nr.uniformMatrix4fv(Zt(e),!!r,a)}},Ib:function(e){e=Wt.programs[e],nr.useProgram(e),nr.currentProgram=e},Hb:function(e,t){nr.vertexAttrib1f(e,t)},Gb:function(e,t){nr.vertexAttrib2f(e,C[t>>2],C[t+4>>2])},Fb:function(e,t){nr.vertexAttrib3f(e,C[t>>2],C[t+4>>2],C[t+8>>2])},Eb:function(e,t){nr.vertexAttrib4f(e,C[t>>2],C[t+4>>2],C[t+8>>2],C[t+12>>2])},Cb:function(e,t,r,n,a,i){nr.vertexAttribPointer(e,t,r,!!n,a,i)},Bb:function(e,t,r,n){nr.viewport(e,t,r,n)},ob:function(e,t,r,n){nr.waitSync(Wt.syncs[e],t,(r>>>0)+4294967296*n)},eb:function(e){var t,r,n=w.length,a=2147483648;if((e>>>=0)>a)return!1;for(var i=1;i<=4;i*=2){var o=n*(1+.2/i);if(o=Math.min(o,e+100663296),rr(Math.min(a,(t=Math.max(e,o))+((r=65536)-t%r)%r)))return!0}return!1},Va:ir,B:function(e){Wt.currentContext==e&&(Wt.currentContext=0),Wt.deleteContext(e)},n:or,Wa:function(e){for(var t=e>>2,r=0;r<14;++r)b[t+r]=0;b[t+0]=b[t+1]=b[t+3]=b[t+4]=b[t+8]=b[t+10]=1},i:function(e){return Wt.makeContextCurrent(e)?0:-5},E:function(e){try{var t=re.getStreamFromFD(e);return te.close(t),0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return e.errno}},gb:function(e,t,r,n){try{var a=function(e,t,r,n){for(var a=0,i=0;i<r;i++){var o=E[t>>2],s=E[t+4>>2];t+=8;var l=te.read(e,v,o,s,n);if(l<0)return-1;if(a+=l,l<s)break}return a}(re.getStreamFromFD(e),t,r);return E[n>>2]=a,0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return e.errno}},bb:function(e,t,r,n,a){try{var i=(l=r)+2097152>>>0<4194305-!!(s=t)?(s>>>0)+4294967296*l:NaN;if(isNaN(i))return 61;var o=re.getStreamFromFD(e);return te.llseek(o,i,n),R=[o.position>>>0,(M=o.position,+Math.abs(M)>=1?M>0?(0|Math.min(+Math.floor(M/4294967296),4294967295))>>>0:~~+Math.ceil((M-+(~~M>>>0))/4294967296)>>>0:0)],b[a>>2]=R[0],b[a+4>>2]=R[1],o.getdents&&0===i&&0===n&&(o.getdents=null),0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return e.errno}var s,l},F:function(e,t,r,n){try{var a=function(e,t,r,n){for(var a=0,i=0;i<r;i++){var o=E[t>>2],s=E[t+4>>2];t+=8;var l=te.write(e,v,o,s,n);if(l<0)return-1;a+=l}return a}(re.getStreamFromFD(e),t,r);return E[n>>2]=a,0}catch(e){if(void 0===te||!(e instanceof te.ErrnoError))throw e;return e.errno}}};!function(){var e={a:hr};function t(e,t){var r,a=e.exports;a=ft.instrumentWasmExports(a),n.asm=a,D((c=n.asm.gc).buffer),n.asm.ic,r=n.asm.hc,j.unshift(r),U()}function a(e){t(e.instance)}function i(t){return(u||"function"!=typeof fetch?Promise.resolve().then((function(){return W(L)})):fetch(L,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+L+"'";return e.arrayBuffer()})).catch((function(){return W(L)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){d("failed to asynchronously prepare wasm: "+e),H(e)}))}if($(),n.instantiateWasm)try{var o=n.instantiateWasm(e,t);return o=ft.instrumentWasmExports(o)}catch(e){return d("Module.instantiateWasm callback failed with error: "+e),!1}(u||"function"!=typeof WebAssembly.instantiateStreaming||V(L)||"function"!=typeof fetch?i(a):fetch(L,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(a,(function(e){return d("wasm streaming compile failed: "+e),d("falling back to ArrayBuffer instantiation"),i(a)}))}))).catch(r)}(),n.___wasm_call_ctors=function(){return(n.___wasm_call_ctors=n.asm.hc).apply(null,arguments)};var mr=n._free=function(){return(mr=n._free=n.asm.jc).apply(null,arguments)},pr=n._malloc=function(){return(pr=n._malloc=n.asm.kc).apply(null,arguments)},yr=n.___getTypeName=function(){return(yr=n.___getTypeName=n.asm.lc).apply(null,arguments)};n.__embind_initialize_bindings=function(){return(n.__embind_initialize_bindings=n.asm.mc).apply(null,arguments)};var vr=n.___errno_location=function(){return(vr=n.___errno_location=n.asm.nc).apply(null,arguments)},wr=n.___cxa_is_pointer_type=function(){return(wr=n.___cxa_is_pointer_type=n.asm.oc).apply(null,arguments)};n.dynCall_ii=function(){return(n.dynCall_ii=n.asm.pc).apply(null,arguments)},n.dynCall_vi=function(){return(n.dynCall_vi=n.asm.qc).apply(null,arguments)},n.dynCall_ji=function(){return(n.dynCall_ji=n.asm.rc).apply(null,arguments)},n.dynCall_iij=function(){return(n.dynCall_iij=n.asm.sc).apply(null,arguments)},n.dynCall_viiij=function(){return(n.dynCall_viiij=n.asm.tc).apply(null,arguments)},n.dynCall_vii=function(){return(n.dynCall_vii=n.asm.uc).apply(null,arguments)},n.dynCall_viij=function(){return(n.dynCall_viij=n.asm.vc).apply(null,arguments)},n.dynCall_fij=function(){return(n.dynCall_fij=n.asm.wc).apply(null,arguments)},n.dynCall_viiii=function(){return(n.dynCall_viiii=n.asm.xc).apply(null,arguments)},n.dynCall_iii=function(){return(n.dynCall_iii=n.asm.yc).apply(null,arguments)},n.dynCall_fii=function(){return(n.dynCall_fii=n.asm.zc).apply(null,arguments)},n.dynCall_viii=function(){return(n.dynCall_viii=n.asm.Ac).apply(null,arguments)},n.dynCall_v=function(){return(n.dynCall_v=n.asm.Bc).apply(null,arguments)},n.dynCall_fif=function(){return(n.dynCall_fif=n.asm.Cc).apply(null,arguments)},n.dynCall_vij=function(){return(n.dynCall_vij=n.asm.Dc).apply(null,arguments)},n.dynCall_vijiii=function(){return(n.dynCall_vijiii=n.asm.Ec).apply(null,arguments)},n.dynCall_viiiii=function(){return(n.dynCall_viiiii=n.asm.Fc).apply(null,arguments)},n.dynCall_iiiiii=function(){return(n.dynCall_iiiiii=n.asm.Gc).apply(null,arguments)},n.dynCall_iiii=function(){return(n.dynCall_iiii=n.asm.Hc).apply(null,arguments)},n.dynCall_iiiiiii=function(){return(n.dynCall_iiiiiii=n.asm.Ic).apply(null,arguments)},n.dynCall_iiij=function(){return(n.dynCall_iiij=n.asm.Jc).apply(null,arguments)},n.dynCall_iiiff=function(){return(n.dynCall_iiiff=n.asm.Kc).apply(null,arguments)},n.dynCall_viiiiii=function(){return(n.dynCall_viiiiii=n.asm.Lc).apply(null,arguments)},n.dynCall_iiiii=function(){return(n.dynCall_iiiii=n.asm.Mc).apply(null,arguments)},n.dynCall_viif=function(){return(n.dynCall_viif=n.asm.Nc).apply(null,arguments)},n.dynCall_viiff=function(){return(n.dynCall_viiff=n.asm.Oc).apply(null,arguments)},n.dynCall_viiffff=function(){return(n.dynCall_viiffff=n.asm.Pc).apply(null,arguments)},n.dynCall_iiifii=function(){return(n.dynCall_iiifii=n.asm.Qc).apply(null,arguments)},n.dynCall_iiiffii=function(){return(n.dynCall_iiiffii=n.asm.Rc).apply(null,arguments)},n.dynCall_jii=function(){return(n.dynCall_jii=n.asm.Sc).apply(null,arguments)},n.dynCall_jij=function(){return(n.dynCall_jij=n.asm.Tc).apply(null,arguments)},n.dynCall_fi=function(){return(n.dynCall_fi=n.asm.Uc).apply(null,arguments)},n.dynCall_jijf=function(){return(n.dynCall_jijf=n.asm.Vc).apply(null,arguments)},n.dynCall_iiiij=function(){return(n.dynCall_iiiij=n.asm.Wc).apply(null,arguments)},n.dynCall_i=function(){return(n.dynCall_i=n.asm.Xc).apply(null,arguments)},n.dynCall_vif=function(){return(n.dynCall_vif=n.asm.Yc).apply(null,arguments)},n.dynCall_di=function(){return(n.dynCall_di=n.asm.Zc).apply(null,arguments)},n.dynCall_vid=function(){return(n.dynCall_vid=n.asm._c).apply(null,arguments)},n.dynCall_iiiifii=function(){return(n.dynCall_iiiifii=n.asm.$c).apply(null,arguments)},n.dynCall_iiiiiiii=function(){return(n.dynCall_iiiiiiii=n.asm.ad).apply(null,arguments)},n.dynCall_iiiffi=function(){return(n.dynCall_iiiffi=n.asm.bd).apply(null,arguments)},n.dynCall_vifffffffff=function(){return(n.dynCall_vifffffffff=n.asm.cd).apply(null,arguments)},n.dynCall_iifffffffff=function(){return(n.dynCall_iifffffffff=n.asm.dd).apply(null,arguments)},n.dynCall_iiff=function(){return(n.dynCall_iiff=n.asm.ed).apply(null,arguments)},n.dynCall_iif=function(){return(n.dynCall_iif=n.asm.fd).apply(null,arguments)},n.dynCall_viff=function(){return(n.dynCall_viff=n.asm.gd).apply(null,arguments)},n.dynCall_viffffff=function(){return(n.dynCall_viffffff=n.asm.hd).apply(null,arguments)},n.dynCall_dii=function(){return(n.dynCall_dii=n.asm.id).apply(null,arguments)},n.dynCall_viid=function(){return(n.dynCall_viid=n.asm.jd).apply(null,arguments)},n.dynCall_iiiiffi=function(){return(n.dynCall_iiiiffi=n.asm.kd).apply(null,arguments)},n.dynCall_fiii=function(){return(n.dynCall_fiii=n.asm.ld).apply(null,arguments)},n.dynCall_viiif=function(){return(n.dynCall_viiif=n.asm.md).apply(null,arguments)},n.dynCall_viifffffffff=function(){return(n.dynCall_viifffffffff=n.asm.nd).apply(null,arguments)},n.dynCall_viiffffff=function(){return(n.dynCall_viiffffff=n.asm.od).apply(null,arguments)},n.dynCall_viifff=function(){return(n.dynCall_viifff=n.asm.pd).apply(null,arguments)},n.dynCall_viiifii=function(){return(n.dynCall_viiifii=n.asm.qd).apply(null,arguments)},n.dynCall_viiiiiii=function(){return(n.dynCall_viiiiiii=n.asm.rd).apply(null,arguments)},n.dynCall_viffff=function(){return(n.dynCall_viffff=n.asm.sd).apply(null,arguments)},n.dynCall_vifff=function(){return(n.dynCall_vifff=n.asm.td).apply(null,arguments)},n.dynCall_iiffi=function(){return(n.dynCall_iiffi=n.asm.ud).apply(null,arguments)},n.dynCall_iifii=function(){return(n.dynCall_iifii=n.asm.vd).apply(null,arguments)},n.dynCall_iiif=function(){return(n.dynCall_iiif=n.asm.wd).apply(null,arguments)},n.dynCall_iiiiij=function(){return(n.dynCall_iiiiij=n.asm.xd).apply(null,arguments)},n.dynCall_iijj=function(){return(n.dynCall_iijj=n.asm.yd).apply(null,arguments)},n.dynCall_vffff=function(){return(n.dynCall_vffff=n.asm.zd).apply(null,arguments)},n.dynCall_viiiiiiii=function(){return(n.dynCall_viiiiiiii=n.asm.Ad).apply(null,arguments)},n.dynCall_vf=function(){return(n.dynCall_vf=n.asm.Bd).apply(null,arguments)},n.dynCall_viiiiiiiii=function(){return(n.dynCall_viiiiiiiii=n.asm.Cd).apply(null,arguments)},n.dynCall_viiiiiiiiii=function(){return(n.dynCall_viiiiiiiiii=n.asm.Dd).apply(null,arguments)},n.dynCall_viifi=function(){return(n.dynCall_viifi=n.asm.Ed).apply(null,arguments)},n.dynCall_fiifiii=function(){return(n.dynCall_fiifiii=n.asm.Fd).apply(null,arguments)},n.dynCall_iiifiii=function(){return(n.dynCall_iiifiii=n.asm.Gd).apply(null,arguments)},n.dynCall_viiifiii=function(){return(n.dynCall_viiifiii=n.asm.Hd).apply(null,arguments)},n.dynCall_vifii=function(){return(n.dynCall_vifii=n.asm.Id).apply(null,arguments)},n.dynCall_viifd=function(){return(n.dynCall_viifd=n.asm.Jd).apply(null,arguments)},n.dynCall_viddi=function(){return(n.dynCall_viddi=n.asm.Kd).apply(null,arguments)},n.dynCall_viiiiiffii=function(){return(n.dynCall_viiiiiffii=n.asm.Ld).apply(null,arguments)},n.dynCall_jiiii=function(){return(n.dynCall_jiiii=n.asm.Md).apply(null,arguments)},n.dynCall_jiji=function(){return(n.dynCall_jiji=n.asm.Nd).apply(null,arguments)},n.dynCall_iidiiii=function(){return(n.dynCall_iidiiii=n.asm.Od).apply(null,arguments)};var gr,_r=n._asyncify_start_unwind=function(){return(_r=n._asyncify_start_unwind=n.asm.Pd).apply(null,arguments)},br=n._asyncify_stop_unwind=function(){return(br=n._asyncify_stop_unwind=n.asm.Qd).apply(null,arguments)},Er=n._asyncify_start_rewind=function(){return(Er=n._asyncify_start_rewind=n.asm.Rd).apply(null,arguments)},Cr=n._asyncify_stop_rewind=function(){return(Cr=n._asyncify_stop_rewind=n.asm.Sd).apply(null,arguments)};function xr(e){function r(){gr||(gr=!0,n.calledRun=!0,m||(n.noFSInit||te.init.initialized||te.init(),te.ignorePermissions=!1,q(j),t(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)e=n.postRun.shift(),O.unshift(e);var e;q(O)}()))}G>0||(function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)e=n.preRun.shift(),B.unshift(e);var e;q(B)}(),G>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),r()}),1)):r()))}if(n.GL=Wt,n.Asyncify=ft,N=function e(){gr||xr(),gr||(N=e)},n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return xr(),e.ready});class lt{constructor(){this.executing=!1,this.queue=[]}exec(e,t,...r){return new Promise(((n,a)=>{this.queue.push({fn:async()=>{if(e)try{const a=await e.call(t,...r);n(a)}catch(e){a(e)}else a(new Error("Function is null!"))}}),this.executing||this.execNextTask()}))}execNextTask(){if(this.queue.length<1)return void(this.executing=!1);this.executing=!0;this.queue.shift().fn().then((()=>{this.execNextTask()}))}}e.PAGInit=(e={})=>st(e).then((e=>(it(e),e.webAssemblyQueue=new lt,e.globalCanvas=new e.GlobalCanvas,e.PAGFont.registerFallbackFontNames(),e))).catch((e=>{throw console.error(e),new Error("PAGInit fail! Please check .wasm file path valid.")})),e.types=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=libpag.min.js.map
